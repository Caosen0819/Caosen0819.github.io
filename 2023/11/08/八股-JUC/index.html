<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>八股-JUC | 森</title>
  <meta name="keywords" content=" Java并发 ">
  <meta name="description" content="八股-JUC | 森">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="潮起潮落，云卷云舒">
<meta property="og:type" content="website">
<meta property="og:title" content="all-tags">
<meta property="og:url" content="http://example.com/all-tags/index.html">
<meta property="og:site_name" content="森">
<meta property="og:description" content="潮起潮落，云卷云舒">
<meta property="og:locale" content="zh_CH">
<meta property="article:published_time" content="2023-04-12T03:28:50.336Z">
<meta property="article:modified_time" content="2023-04-12T03:28:48.541Z">
<meta property="article:author" content="CSEN">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/cs.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 6.3.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/cs.jpg"/>
</a>
<div class="author">
    <span>CSEN</span>
</div>

<div class="icon">
    
        
            <a title="rss"
               href="/atom.xml"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-rss"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="github"
               href="https://github.com/Caosen0819"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="csdn"
               href="https://blog.csdn.net/weixin_45592424?type=blog"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-csdn"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="email"
               href="mailto:caosen0819@163.com"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="qq"
               href="http://wpa.qq.com/msgrd?v=3&uin=1667018430&site=qq&menu=yes"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-qq"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="neteasemusic"
               href="https://music.163.com/#/user/home?id=406574616"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-neteasemusic"></use>
                    </svg>
                
            </a>
        
    
</div>





<ul>
    <li>
        <div class="all active" data-rel="All">All
            
                <small>(37)</small>
            
        </div>
    </li>
    
        
            
                
    <li>
        <div data-rel="算法">
            
            算法
            <small>(3)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="项目实践">
            
            项目实践
            <small>(5)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="学习资料">
            
            学习资料
            <small>(1)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="Java">
            
            Java
            <small>(27)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="new">
            
            new
            <small>(1)</small>
        </div>
        
    </li>

            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
            <a class="about  hasFriend  site_url"
               
               href="/about">About</a>
        
        <a style="width: 50%"
                
                                           class="friends">Friends</a>
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="37">
<input type="hidden" id="yelog_site_word_count" value="137.2k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        Links
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">All</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>暗通道</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>测试</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>场景题</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>基础</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>计算机网络</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>设计模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>刷题</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>微信小程序</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>DBRouter-starter</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Java</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Java并发</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Java基础知识</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>JVM</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Kafka</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>lucky项目</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>mybatis-starter</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Mysql</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>new</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Oauth2</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Redis</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>spring</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        
        <a  class="All Java "
           href="/2024/07/09/Spring-%E4%BA%8B%E5%8A%A1/"
           data-tag="spring"
           data-author="" >
            <span class="post-title" title="Spring-事务">Spring-事务</span>
            <span class="post-date" title="2024-07-09 00:00:00">2024/07/09</span>
        </a>
        
        
        <a  class="All Java "
           href="/2024/05/20/Oauth2-%E6%9D%83%E9%99%90%E6%A0%A1%E9%AA%8C%E7%90%86%E8%A7%A3%E7%AF%87/"
           data-tag="Oauth2"
           data-author="" >
            <span class="post-title" title="Oauth2-权限校验简单理解篇">Oauth2-权限校验简单理解篇</span>
            <span class="post-date" title="2024-05-20 14:43:00">2024/05/20</span>
        </a>
        
        
        <a  class="All Java "
           href="/2024/05/04/Oauth2-%E6%95%B4%E5%90%88%E7%AF%87/"
           data-tag="Oauth2"
           data-author="" >
            <span class="post-title" title="Oauth2-整合篇">Oauth2-整合篇</span>
            <span class="post-date" title="2024-05-04 13:35:52">2024/05/04</span>
        </a>
        
        
        <a  class="All Java "
           href="/2024/04/11/Spring-IOC%E7%9A%84%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B/"
           data-tag="spring"
           data-author="" >
            <span class="post-title" title="Spring-IOC">Spring-IOC</span>
            <span class="post-date" title="2024-04-11 00:00:00">2024/04/11</span>
        </a>
        
        
        <a  class="All Java "
           href="/2024/03/21/Oauth2-%E5%BC%82%E5%B8%B8%E9%85%8D%E7%BD%AE%E7%AF%87/"
           data-tag="Oauth2"
           data-author="" >
            <span class="post-title" title="Oauth2-异常配置总结">Oauth2-异常配置总结</span>
            <span class="post-date" title="2024-03-21 23:44:51">2024/03/21</span>
        </a>
        
        
        <a  class="All Java "
           href="/2024/03/09/Oauth2-%E4%BB%A4%E7%89%8C%E9%85%8D%E7%BD%AE%E7%AF%87/"
           data-tag="Oauth2"
           data-author="" >
            <span class="post-title" title="Oauth2-令牌配置篇">Oauth2-令牌配置篇</span>
            <span class="post-date" title="2024-03-09 12:32:47">2024/03/09</span>
        </a>
        
        
        <a  class="All Java "
           href="/2024/03/07/Oauth2-%E9%89%B4%E6%9D%83%E6%9C%8D%E5%8A%A1%E7%AF%87/"
           data-tag="Oauth2"
           data-author="" >
            <span class="post-title" title="Oauth2-鉴权服务篇">Oauth2-鉴权服务篇</span>
            <span class="post-date" title="2024-03-07 18:56:34">2024/03/07</span>
        </a>
        
        
        <a  class="All Java "
           href="/2024/03/04/Oauth2-%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86%E7%AF%87-springsecurity/"
           data-tag="Oauth2"
           data-author="" >
            <span class="post-title" title="Oauth2-前置知识篇-Security">Oauth2-前置知识篇-Security</span>
            <span class="post-date" title="2024-03-04 21:32:11">2024/03/04</span>
        </a>
        
        
        <a  class="All Java "
           href="/2024/02/02/%E5%85%AB%E8%82%A1-MySQL45/"
           data-tag="Mysql"
           data-author="" >
            <span class="post-title" title="八股-MySQL45">八股-MySQL45</span>
            <span class="post-date" title="2024-02-02 21:29:04">2024/02/02</span>
        </a>
        
        
        <a  class="All Java "
           href="/2024/02/02/%E5%85%AB%E8%82%A1-%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98/"
           data-tag="Java"
           data-author="" >
            <span class="post-title" title="八股-面试范围">八股-面试范围</span>
            <span class="post-date" title="2024-02-02 21:29:04">2024/02/02</span>
        </a>
        
        
        <a  class="All Java "
           href="/2023/11/08/%E5%85%AB%E8%82%A1-JUC/"
           data-tag="Java并发"
           data-author="" >
            <span class="post-title" title="八股-JUC">八股-JUC</span>
            <span class="post-date" title="2023-11-08 00:00:00">2023/11/08</span>
        </a>
        
        
        <a  class="All Java "
           href="/2023/11/08/%E5%85%AB%E8%82%A1-mysql%E6%8A%80%E6%9C%AF%E5%86%85%E5%B9%95/"
           data-tag="Mysql"
           data-author="" >
            <span class="post-title" title="八股-mysql技术内幕">八股-mysql技术内幕</span>
            <span class="post-date" title="2023-11-08 00:00:00">2023/11/08</span>
        </a>
        
        
        <a  class="All Java "
           href="/2023/11/04/%E5%85%AB%E8%82%A1-JVM/"
           data-tag="JVM"
           data-author="" >
            <span class="post-title" title="八股-JVM">八股-JVM</span>
            <span class="post-date" title="2023-11-04 00:00:00">2023/11/04</span>
        </a>
        
        
        <a  class="All Java "
           href="/2023/10/10/%E5%85%AB%E8%82%A1-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"
           data-tag="设计模式"
           data-author="" >
            <span class="post-title" title="八股-设计模式">八股-设计模式</span>
            <span class="post-date" title="2023-10-10 00:00:00">2023/10/10</span>
        </a>
        
        
        <a  class="All Java "
           href="/2023/10/09/%E5%85%AB%E8%82%A1-Redis/"
           data-tag="Redis"
           data-author="" >
            <span class="post-title" title="八股-Redis">八股-Redis</span>
            <span class="post-date" title="2023-10-09 00:00:00">2023/10/09</span>
        </a>
        
        
        <a  class="All Java "
           href="/2023/08/19/%E5%88%B7%E9%A2%98-JZ20240206/"
           data-tag="刷题"
           data-author="" >
            <span class="post-title" title="Hot100">Hot100</span>
            <span class="post-date" title="2023-08-19 00:00:00">2023/08/19</span>
        </a>
        
        
        <a  class="All Java "
           href="/2023/08/19/%E5%88%B7%E9%A2%98-hot/"
           data-tag="刷题"
           data-author="" >
            <span class="post-title" title="Hot100">Hot100</span>
            <span class="post-date" title="2023-08-19 00:00:00">2023/08/19</span>
        </a>
        
        
        <a  class="All Java "
           href="/2023/08/19/%E5%88%B7%E9%A2%98-hot1000124/"
           data-tag="刷题"
           data-author="" >
            <span class="post-title" title="Hot100">Hot100</span>
            <span class="post-date" title="2023-08-19 00:00:00">2023/08/19</span>
        </a>
        
        
        <a  class="All Java "
           href="/2023/08/19/%E5%88%B7%E9%A2%98-shua/"
           data-tag="刷题"
           data-author="" >
            <span class="post-title" title="Java刷题">Java刷题</span>
            <span class="post-date" title="2023-08-19 00:00:00">2023/08/19</span>
        </a>
        
        
        <a  class="All Java "
           href="/2023/08/07/%E5%85%AB%E8%82%A1-Java%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"
           data-tag="Java基础知识"
           data-author="" >
            <span class="post-title" title="八股-Java基础知识">八股-Java基础知识</span>
            <span class="post-date" title="2023-08-07 00:00:00">2023/08/07</span>
        </a>
        
        
        <a  class="All Java "
           href="/2023/07/08/%E5%85%AB%E8%82%A1-Kafka/"
           data-tag="Kafka"
           data-author="" >
            <span class="post-title" title="八股-Kafka">八股-Kafka</span>
            <span class="post-date" title="2023-07-08 00:00:00">2023/07/08</span>
        </a>
        
        
        <a  class="All Java "
           href="/2023/07/08/%E5%85%AB%E8%82%A1-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C1/"
           data-tag="计算机网络"
           data-author="" >
            <span class="post-title" title="八股-计算机网络1">八股-计算机网络1</span>
            <span class="post-date" title="2023-07-08 00:00:00">2023/07/08</span>
        </a>
        
        
        <a  class="All Java "
           href="/2023/07/08/%E5%85%AB%E8%82%A1-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C3/"
           data-tag="计算机网络"
           data-author="" >
            <span class="post-title" title="八股-计算机网络3">八股-计算机网络3</span>
            <span class="post-date" title="2023-07-08 00:00:00">2023/07/08</span>
        </a>
        
        
        <a  class="All Java "
           href="/2023/07/08/%E5%85%AB%E8%82%A1-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C2/"
           data-tag="计算机网络"
           data-author="" >
            <span class="post-title" title="八股-计算机网络2">八股-计算机网络2</span>
            <span class="post-date" title="2023-07-08 00:00:00">2023/07/08</span>
        </a>
        
        
        <a  class="All Java "
           href="/2023/07/08/%E5%85%AB%E8%82%A1-%E8%BE%93%E5%85%A5%E7%BD%91%E7%BB%9C%EF%BC%8C%E6%9C%9F%E9%97%B4%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F/"
           data-tag="计算机网络"
           data-author="" >
            <span class="post-title" title="八股-输入网络，期间发生了什么？">八股-输入网络，期间发生了什么？</span>
            <span class="post-date" title="2023-07-08 00:00:00">2023/07/08</span>
        </a>
        
        
        <a  class="All 项目实践 "
           href="/2023/04/26/%E9%A1%B9%E7%9B%AE-mybatis%E7%BB%84%E4%BB%B6/"
           data-tag="mybatis-starter"
           data-author="" >
            <span class="post-title" title="项目-mybatis组件">项目-mybatis组件</span>
            <span class="post-date" title="2023-04-26 00:00:00">2023/04/26</span>
        </a>
        
        
        <a  class="All 项目实践 "
           href="/2023/04/22/%E9%A1%B9%E7%9B%AE-DBRouter%E7%BB%84%E4%BB%B6/"
           data-tag="DBRouter-starter"
           data-author="" >
            <span class="post-title" title="项目-DBRouter组件">项目-DBRouter组件</span>
            <span class="post-date" title="2023-04-22 00:00:00">2023/04/22</span>
        </a>
        
        
        <a  class="All 学习资料 "
           href="/2023/04/11/%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99/"
           data-tag="测试"
           data-author="" >
            <span class="post-title" title="参考资料">参考资料</span>
            <span class="post-date" title="2023-04-11 00:00:00">2023/04/11</span>
        </a>
        
        
        <a  class="All new "
           href="/2023/04/04/New%20page/"
           data-tag="new"
           data-author="" >
            <span class="post-title" title="待定">待定</span>
            <span class="post-date" title="2023-04-04 00:00:00">2023/04/04</span>
        </a>
        
        
        <a  class="All Java "
           href="/2023/04/04/%E5%85%AB%E8%82%A1-%E5%9C%BA%E6%99%AF%E9%A2%98/"
           data-tag="场景题"
           data-author="" >
            <span class="post-title" title="八股-其余问题">八股-其余问题</span>
            <span class="post-date" title="2023-04-04 00:00:00">2023/04/04</span>
        </a>
        
        
        <a  class="All 项目实践 "
           href="/2023/04/03/%E9%A1%B9%E7%9B%AE-Lucky%E6%8A%BD%E5%A5%96/"
           data-tag="lucky项目"
           data-author="" >
            <span class="post-title" title="项目-Lucky抽奖">项目-Lucky抽奖</span>
            <span class="post-date" title="2023-04-03 00:00:00">2023/04/03</span>
        </a>
        
        
        <a  class="All 算法 "
           href="/2022/10/23/%E7%AE%97%E6%B3%95-%E5%8E%BB%E9%9B%BE%E8%AE%BA%E6%96%87%E5%8F%82%E8%80%83/"
           data-tag="暗通道"
           data-author="" >
            <span class="post-title" title="算法-去雾论文参考">算法-去雾论文参考</span>
            <span class="post-date" title="2022-10-23 13:03:43">2022/10/23</span>
        </a>
        
        
        <a  class="All 算法 "
           href="/2022/10/23/%E7%AE%97%E6%B3%95-%E6%9A%97%E9%80%9A%E9%81%93%E5%8E%BB%E9%9B%BE%E6%80%BB%E7%BB%93/"
           data-tag="暗通道"
           data-author="" >
            <span class="post-title" title="算法-暗通道去雾算法总结">算法-暗通道去雾算法总结</span>
            <span class="post-date" title="2022-10-23 13:03:43">2022/10/23</span>
        </a>
        
        
        <a  class="All 项目实践 "
           href="/2022/10/04/%E9%A1%B9%E7%9B%AE-%E5%85%BB%E7%94%9F%E6%89%93%E5%8D%A1%E5%81%A5%E5%BA%B7%E5%B0%8F%E7%A8%8B%E5%BA%8F/"
           data-tag="微信小程序"
           data-author="" >
            <span class="post-title" title="项目-养生打卡健康小程序">项目-养生打卡健康小程序</span>
            <span class="post-date" title="2022-10-04 13:35:52">2022/10/04</span>
        </a>
        
        
        <a  class="All 项目实践 "
           href="/2022/10/04/%E9%A1%B9%E7%9B%AE-%E6%89%93%E5%8D%A1%E7%A7%AF%E5%88%86%E5%88%B6%E8%87%AA%E5%BE%8B%E5%B0%8F%E7%A8%8B%E5%BA%8F/"
           data-tag="微信小程序"
           data-author="" >
            <span class="post-title" title="项目-日常打卡积分制自律小程序">项目-日常打卡积分制自律小程序</span>
            <span class="post-date" title="2022-10-04 13:35:52">2022/10/04</span>
        </a>
        
        
        <a  class="All Java "
           href="/2022/04/01/Oauth2-%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1%E7%AF%87/"
           data-tag="Oauth2"
           data-author="" >
            <span class="post-title" title="Oauth2-认证服务篇">Oauth2-认证服务篇</span>
            <span class="post-date" title="2022-04-01 08:22:13">2022/04/01</span>
        </a>
        
        
        <a  class="All 算法 "
           href="/2022/02/13/%E7%AE%97%E6%B3%95-%E5%9F%BA%E7%A1%80%E9%98%85%E8%AF%BB/"
           data-tag="基础"
           data-author="" >
            <span class="post-title" title="算法-基础阅读">算法-基础阅读</span>
            <span class="post-date" title="2022-02-13 13:03:43">2022/02/13</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-八股-JUC" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">八股-JUC</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="Java">Java</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color2">Java并发</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            Created At : <time class="date" title='Updated At: 2024-08-27 16:42:36'>2023-11-08 00:00</time>
        
    </div>
    <div class="article-meta">
        
        <span>Count:7.9k</span>
        
        
        <span id="busuanzi_container_page_pv">
            Views 👀 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1%E3%80%81%E5%B9%B6%E5%8F%91%E6%9C%BA%E5%88%B6%E7%9A%84%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86"><span class="toc-text">1、并发机制的底层原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#0%E3%80%81%E4%B9%90%E8%A7%82%E9%94%81%E5%92%8C%E6%82%B2%E8%A7%82%E9%94%81"><span class="toc-text">0、乐观锁和悲观锁</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0%E3%80%81CAS"><span class="toc-text">0、CAS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81volatile"><span class="toc-text">1、volatile</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81Synchronized"><span class="toc-text">2、Synchronized</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E9%94%81%EF%BC%88LOCK%E6%8E%A5%E5%8F%A3%EF%BC%89"><span class="toc-text">3、锁（LOCK接口）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#0%E3%80%81synchronized%E5%92%8Clock%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB"><span class="toc-text">0、synchronized和lock有什么区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81AQS"><span class="toc-text">1、AQS</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Synchronized%E4%B8%8EAQS%E5%AF%B9%E6%AF%94"><span class="toc-text">Synchronized与AQS对比</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81ReentrantLock%E5%8E%9F%E7%90%86"><span class="toc-text">2、ReentrantLock原理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Condition"><span class="toc-text">Condition</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E6%AD%BB%E9%94%81"><span class="toc-text">4、死锁</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-text">4、原子操作的实现原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%A4%84%E7%90%86%E5%99%A8%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C%EF%BC%9F"><span class="toc-text">1、处理器如何实现原子操作？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81Java%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C"><span class="toc-text">2、Java怎么实现原子操作</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2%E3%80%81JAVA%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B"><span class="toc-text">2、JAVA内存模型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%AE%9A%E4%B9%89%E7%90%86%E8%A7%A3"><span class="toc-text">1、定义理解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E9%87%8D%E6%8E%92%E5%BA%8F"><span class="toc-text">2、重排序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E9%A1%BA%E5%BA%8F%E4%B8%80%E8%87%B4%E6%80%A7"><span class="toc-text">3、顺序一致性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81happens-before-%E5%8E%9F%E5%88%99"><span class="toc-text">4、happens-before 原则</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3%E3%80%81ThreadLocal"><span class="toc-text">3、ThreadLocal</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4%E3%80%81%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%92%8C%E7%BA%BF%E7%A8%8B"><span class="toc-text">4、线程池和线程</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B"><span class="toc-text">线程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Future"><span class="toc-text">Future</span></a></li></ol></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>多线程一定比单线程快吗？<font color='red'><u><em><strong>不一定，因为还有线程上下文切换的消耗</strong></em></u></font></p>
<p>那如何减少上下文切换？<font color='red'><u><em><strong>无锁并发、CAS</strong></em></u></font></p>
<p>线程间如何通信？</p>
<h1 id="1、并发机制的底层原理"><a href="#1、并发机制的底层原理" class="headerlink" title="1、并发机制的底层原理"></a>1、并发机制的底层原理</h1><p><font color='blue'><u><em><strong>内存可见性：一个线程修改了共享变量的值,其他线程能够立即得知这个修改</strong></em></u></font></p>
<p><font color='blue'><u><em><strong>有序性指的是：程序执行的顺序按照代码的先后顺序执行。</strong></em></u></font></p>
<p><font color='blue'><u><em><strong>原子性是指：在一个操作多个步骤时，要么所有操作都被执行，要么所有操作都不执行。</strong></em></u></font></p>
<h3 id="0、乐观锁和悲观锁"><a href="#0、乐观锁和悲观锁" class="headerlink" title="0、乐观锁和悲观锁"></a>0、乐观锁和悲观锁</h3><p><strong>悲观锁：</strong></p>
<blockquote>
<p><font color='red'><u><em><strong>共享资源每次被访问的时候就会被修改，所以每次在获取资源操作的时候都会上锁。</strong></em></u></font>Synchronized、Reentrantlock 数据库的锁<font color='green'><strong>Synchronized、Reentrantlock 数据库的锁</strong></font></p>
</blockquote>
<p><strong>乐观锁：</strong></p>
<blockquote>
<p><font color='red'><u><em><strong>认为共享资源每次被访问的时候不会被修改</strong></em></u></font>，只是在修改的时候去验证数据有没有被其它线程修改了。<font color='green'><strong>悲观锁常见的就是CAS算法</strong></font></p>
</blockquote>
<h3 id="0、CAS"><a href="#0、CAS" class="headerlink" title="0、CAS"></a>0、CAS</h3><blockquote>
<p><font color='red'><u><em><strong>cas实际在操作系统层面是加锁的</strong></em></u></font></p>
<p><font color='blue'><strong>CAS是将指定内存地址A的内容与所给的旧值B相比，如果相等，则将其内容替换为指令中提供的新值C；如果不相等，进入自旋（称为自旋锁），直到当前值与更新前的值一致为止，或者达到最大次数。</strong></font></p>
<p><font color='blue'><strong>jdk提供的CAS方案是unsafe类的cas的本地方法，这个本地方法会调cmpxchg方法，它是在汇编层级，会禁止变量两侧的指令优化，然后使用cmpxchg指令比较并更新变量值(原子性)，这个指令是硬件上的的数据，保证CAS的原子性。锁总线，如果是多核则加一个lock锁定(缓存锁、MESI)</strong></font></p>
<p><font color='green'><strong>硬件层间不能保证有序和内存可见，只能保证原子，但是加了LOCK就可以保证有序可见了</strong></font></p>
<p>缺点：</p>
<p><font color='red'><u><em><strong>是一次性只能保证一个共享变量的原子性</strong></em></u></font></p>
<p><font color='red'><u><em><strong>如果一直循环会浪费cpu资源</strong></em></u></font></p>
<p><font color='red'><u><strong>ABA的解决方法就是在变量前面加上版本号</strong></u></font></p>
</blockquote>
<p>很关键的一点：cas只能保证原子性，而volatile保证可见性和有序性。所以aqs的volatile修饰的state变量使用cas‘方式修改的。	</p>
<h3 id="1、volatile"><a href="#1、volatile" class="headerlink" title="1、volatile"></a>1、volatile</h3><blockquote>
<p><font color='blue'><u><em><strong>volatile具备可见性、有序性但是不具备原子性。他的内存语义是，当写一个volatile变量，jmm会把该线程对应的本地内存中共享变量刷新到主内存,读一个volatile变量，jmm会把该线程对应的本地内存置为无效，然后从主内存里面读，他的实现依赖于一个内存屏障，然后我们讲一下怎么用到这个内存屏障。</strong></em></u></font></p>
<p><font color='red'><u><em><strong>我们知道单线程下，由于asifserial的存在，指令执行结果是具备顺序一致性。但是在多线程环境下，重排序会导致各个线程看到的全局执行顺序不一致。</strong></em></u></font></p>
<ul>
<li><strong>1、编译器重排序：</strong> 例如将循环内重复调用的操作提前到循环外执行；</li>
<li><strong>2、处理器系统重排序：</strong> 例如指令并行技术将多条指令重叠执行，或者使用分支预测技术提前执行分支的指令，并把计算结果放到重排列缓冲区（Reorder Buffer）的硬件缓存中，当程序真的进入分支后直接使用缓存中的结算结果；</li>
<li><strong>3、存储器系统重排序：</strong> 例如写缓冲区（发消息不等直接写到storebuffer，收消息不看直接返回，然后放到invalid queue）和失效队列机制，即是可见性问题，从内存的角度也是指令重排问题。</li>
</ul>
<p>解决办法就是<font color='green'><u>*** Memory Barrier（内存屏障）***</u></font>。借助内存屏障可以很好地保证了顺序一致性。</p>
<p>JMM就是有4种屏障，（cpu三种，读屏障，写屏障，全屏障）</p>
<blockquote>
<ul>
<li>在每个volatile写操作的前面插入一个StoreStore屏障。</li>
<li>在每个volatile写操作的后面插入一个StoreLoad屏障。</li>
<li>在每个volatile读操作的后面插入一个LoadLoad屏障。</li>
<li>在每个volatile读操作的后面插入一个LoadStore屏障。</li>
</ul>
</blockquote>
<p>然而这4种内存屏障只是抽象层面的，实际上这四种内存屏障在不同平台下的具体映射的指令是不一样的，而这也恰恰是 JVM 跨平台的优势所在。</p>
<p>我们举一个x86作为例子，只有 StoreLoad 才有具体的指令对应，在x86处理器里面，像mfence lock都可以实现这个而这个StoreLoad的要求，实际上HotSpot关于volatile的实现就是使用的lock前缀指令：</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">lock addl $0x0,(%rsp)</span><br></pre></td></tr></table></figure>

<p>1）加缓存锁（其实是mesi协议），把当前这个处理器缓存的数据写会系统内存。（总线锁、缓存锁）<strong>缓存锁其实是一种实现的效果</strong>，它是通过<strong>缓存一致性协议</strong>来实现的。但是这个MESI一开始是强数据一致性的，但是后来为了加快速度，引入了store buffer 和 invalid queue，就变成了弱数据一致性。</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/584787272?utm_id=0">https://zhuanlan.zhihu.com/p/584787272?utm_id=0</a></p>
<p>2）写回内存的操作会使其他cpu缓存该内存地址的数据无效。（这个用的是 嗅探机制）</p>
</blockquote>
<p>修改、独占、共享、无效</p>
<p>缓存一致性原则：</p>
<p>S to M，Shared的状态下，某个CPU发起了对该缓存行的原子性 read-modify-write 操作，但需要发出 Invalid 消息，并等待一系列的 Invalidate Acknowledge 反馈后才能对缓存行修改；</p>
<p><img src="/../images/Java%E5%B9%B6%E5%8F%91/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQWxhbjA1MTc=,size_20,color_FFFFFF,t_70,g_se,x_16.png" alt="在这里插入图片描述"></p>
<hr>
<p>为什么不保证原子性：</p>
<p>在执行内存屏障之前，不同 CPU 依旧可以对同一个缓存行持有，一个 CPU 对同一个缓存行的修改不能让另一个 CPU 及时感知，因此出现并发冲突。这里我看到一篇博客，他的意思是刚刚好计算的过程在寄存器执行。<font color='red'><u><em><strong>同时加锁，总线仲裁</strong></em></u></font></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_38322527/article/details/119937531">https://blog.csdn.net/qq_38322527/article/details/119937531</a></p>
<p><font color='red'><u><em><strong>volatile怎么保证有序性和可见性？</strong></em></u></font></p>
<p>可见性：读，把自己置为无效，然后读内存；写，会刷回住内存</p>
<p>有序性：禁止指令重排序【内存屏障】</p>
<p><font color='red'><u><em><strong>synchronized怎么保证原子性、可见性、有序性。？</strong></em></u></font></p>
<p>原子性：加锁后只能由一个线程访问，别人访问不了</p>
<p>可见性：释放锁，会把此变量刷回住内存</p>
<p>有序性：同一时间只能由一个线程访问。</p>
<p><font color='red'><u><em><strong>有了synchronized还要volatile？synchronized是锁，性能消耗大+有阻塞。</strong></em></u></font></p>
<p><font color='red'><u><em><strong>有了cas还要volatile？cas只有原子性，没有有序和内存可见。</strong></em></u></font></p>
<p><font color='red'><u><em><strong>synchronized和volatile区别？作用的地方，有无阻塞，性能消耗，有无原子性</strong></em></u></font></p>
<hr>
<p><font color='blue'><u><em><strong>重排序</strong></em></u></font></p>
<ul>
<li><strong>1、编译器重排序：</strong> 例如将循环内重复调用的操作提前到循环外执行；</li>
<li><strong>2、处理器系统重排序：</strong> 例如指令并行技术将多条指令重叠执行，或者使用分支预测技术提前执行分支的指令，并把计算结果放到重排列缓冲区（Reorder Buffer）的硬件缓存中，当程序真的进入分支后直接使用缓存中的结算结果；</li>
<li><strong>3、存储器系统重排序：</strong> 例如写缓冲区和失效队列机制，即是可见性问题，从内存的角度也是指令重排问题。</li>
</ul>
<p>编译器方面有这么一个规定</p>
<p><img src="/../images/%E5%B9%B6%E5%8F%91/image-20230919132522971.png" alt="image-20230919132522971"></p>
<p>当第二个操作是volatile写时，不管第一个操作是什么，都不能重排序。这个规则确保volatile写之前的操作不会被编译器重排序到volatile写之后。</p>
<p>当第一个操作是volatile读时，不管第二个操作是什么，都不能重排序。这个规则确保volatile读之后的操作不会被编译器重排序到volatile读之前。</p>
<p>当第一个操作是volatile写，第二个操作是volatile读时，不能重排序。</p>
<h3 id="2、Synchronized"><a href="#2、Synchronized" class="headerlink" title="2、Synchronized"></a>2、Synchronized</h3><p><font color='red'><u><em><strong>它是一种互斥锁。有三种使用方法：普通方法（锁是类实例对象）、静态方法（锁是当前类的Class对象）、方法块（括号里的对象）。方法和代码块具体实现是不一样的，一个是monitorenter和monitorexit；一个是ACC_SYNCHRONIZED。</strong></em></u></font></p>
<blockquote>
<p>方法级的同步是隐式，JVM可以从方法表里面检查方法的 ACC_SYNCHRONIZED 访问标志是否被设置，如果设置了，执行线程将先持有monitor， 然后再执行方法，方法完成释放monitor。</p>
<p>代码块的同步是利用monitorenter和monitorexit这两个字节码指令。它们分别位于同步代码块的开始和结束位置。当jvm执行到monitorenter指令时，当前线程试图获取monitor对象的所有权，如果未加锁或者已经被当前线程所持有，就把锁的计数器+1；当执行monitorexit指令时，锁计数器-1；当锁计数器为0时，该锁就被释放了。如果获取monitor对象失败，该线程则会进入阻塞状态，直到其他线程释放锁。</p>
<p> 具体的位置可以看markword，就是堆里面对象有对象头、实例数据、对其填充。对象头里面有markword，对象类型指针，这个markword里面就存了这个指向monitor的指针。</p>
<p>monitor由ObjectMonitor实现，他有三个关键的东西，owner、waitset、entrylist，_owner指向持有ObjectMonitor对象的线程，当多个线程同时访问一段同步代码时，首先会进入 _EntryList 集合，当线程获取到对象的monitor 后把monitor中的owner变量设置为当前线程同时monitor中的计数器count加1，若线程调用 wait() 方法，将释放当前持有的monitor，owner变量恢复为null，count自减1，同时该线程进入 WaitSet集合中等待被唤醒。若当前线程执行完毕也将释放monitor(锁)并复位变量的值，以便其他线程进入获取monitor(锁)。</p>
</blockquote>
<p><font color='red'><u><em><strong>锁升级</strong></em></u></font></p>
<p><font color='blue'><u><em><strong>而Java1.6为了减少性能消耗，引入了“偏向锁”“轻量级锁”。</strong></em></u></font></p>
<p><strong>偏向锁</strong>（101）</p>
<blockquote>
<p>偏向锁是用于没有竞争的时候。</p>
<p>他的加锁过程是：把markword后三位改成101，然后通过CAS的方式把markword的线程id改为自己就好就代表自己获得了锁，后续如果再次获取锁，直接去markword里面线程id是不是自己的就可以了。</p>
<p>他会有一个撤销的情况，是因为有其他线程来竞争，会出现两种形式：</p>
<p>1、线程没执行完，那就升级轻量级继续执行。</p>
<p>2、线程执行完了那么我们就尝试重偏向。</p>
</blockquote>
<p><strong>轻量级锁</strong>（000）</p>
<blockquote>
<p>轻量级锁由偏向锁升级而来，适用少量线程交替执行。</p>
<p>他的加锁过程是：</p>
<p>1 在当前线程的栈帧中创建锁记录<br>2 将锁对象中的markword复制到锁记录中<br>3 通过CAS方式将markword替换成指向锁记录的指针，把Markword中的锁标志位设为000。</p>
<p>4、如果失败会自旋再次CAS去获取锁。若失败的次数过多，则轻量级锁会膨胀为重量级锁。</p>
<p>解锁过程：通过CAS操作把Mark Word 和锁记录替换回来，如果失败了，那能是因为其他线程自旋太多次导致升级为重量级锁，那就释放锁并唤醒阻塞的线程竞争锁</p>
</blockquote>
<p><strong>重量级锁</strong>（010）</p>
<blockquote>
<p>重量级锁是轻量级锁受到激烈竞争时，为防止cpu被自旋的线程浪费膨胀而来，因此重量级锁肯定是应付大量线程同时访问同步块的情景。让申请锁失败的线程阻塞后，cpu的负担会减小不少，因此数据的吞吐量也就上来了。</p>
</blockquote>
<p><font color='red'><u><em><strong>为什么叫重量级锁</strong></em></u></font>：synchronized的互斥是内核的互斥量，mutex。而想要申请这个互斥量，就要切换到内核态。</p>
<h3 id="3、锁（LOCK接口）"><a href="#3、锁（LOCK接口）" class="headerlink" title="3、锁（LOCK接口）"></a><strong>3、锁（LOCK接口）</strong></h3><p><img src="/../images/Java%E5%B9%B6%E5%8F%91/image-20231022145201049.png" alt="image-20231022145201049"></p>
<p><strong>锁的内存语义</strong></p>
<p>释放锁的时候，JMM把该线程对应的本地内存中的共享变量刷新到主内存，加锁的时候把该线程对应的本地内存置为无效。</p>
<p><strong>锁内存语义的实现</strong></p>
<p>编译器<strong>不会对volatile读与其后的任意内存操作重排序</strong>，<strong>不会对volatile写与其前的任意操作重排序</strong>。CAS同时具有volatile读和写的内存语义，编译器<strong>不会对CAS前和后的任意内存操作重排序</strong>，其是通过底层处理器缓存锁定实现原子性的。</p>
<h4 id="0、synchronized和lock有什么区别"><a href="#0、synchronized和lock有什么区别" class="headerlink" title="0、synchronized和lock有什么区别"></a>0、synchronized和lock有什么区别</h4><blockquote>
<p><font color='green'><strong>语法层面：synchronized是c++实现。Lock是一个接口，java语言实现的。用法上，synchronized是关键字，自动加锁解锁。</strong></font><font color='green'><strong>lock接口需要你先new出一个lock，然后手动的加锁解锁。</strong></font></p>
<p><font color='green'><strong>功能层面：lock相比synchronized更加灵活。多了很多功能，公平锁、可打断、可超时</strong></font></p>
<p><font color='green'><strong>性能方面：竞争不激烈，差不多。在竞争激烈时，Lock能提供更好的性能。</strong></font></p>
</blockquote>
<h4 id="1、AQS"><a href="#1、AQS" class="headerlink" title="1、AQS"></a>1、AQS</h4><blockquote>
<p>本质是一个抽象类，用来构造锁或其他同步组件的基础框架。</p>
<p>AQS有3个比较关键的东西，<font color='red'><u><em><strong>一个是volatile的state变量，一个是同步队列。一个owner</strong></em></u></font></p>
<p><strong>state</strong>表示同步状态（volatile）</p>
<p><strong>同步队列</strong>是一个双向列表，获取失败的线程会被构造成一个节点通过CAS的方式加入到这个队列尾部。一个节点保存着线程的引用，状态，前驱节点，后继结点。</p>
<p><font color='red'><u><strong>AQS资源共享方式：两种</strong></u></font></p>
<p><strong>1、独占式：</strong></p>
<blockquote>
<p>独占式就是同一时间只有一个线程能获取到同步状态。首先调用tryAcquire，获取失败构造节点通过加入队列尾部进入一个自旋的过程，停止的条件是前驱节点是头结点且成功获取同步状态	。释放同步状态的时候会调用tryRelease，唤醒后面的后继结点。</p>
</blockquote>
<p><strong>2、共享式</strong></p>
<blockquote>
<p>共享式就是在同一时间能有多个线程同时获取到同步状态，在共享式获取的自旋过程中，成功获取的条件是tryAcquireShared这个结果大于等于0。释放的时候也会唤醒后续节点，他有一个和独占式比较大的区别就是释放的时候通过循环和CAS保证。</p>
</blockquote>
<p><strong>常见的实现工具类：</strong></p>
<blockquote>
<p><strong>信号量</strong>：<font color='green'><strong>保证共享资源在同一时刻 N 个线程中只有 N个线程能获取到.</strong></font></p>
<p>应用场景：<font color='green'><strong>流量控制，比如数据库连接数可能只有10个，那你就可以用信号量保证同时只能有10个能连接数据库</strong></font></p>
</blockquote>
<blockquote>
<p><strong>CountDownLatch</strong> （倒计时器，共享锁）：<font color='green'><strong>一次性的，让一个或多个线程，等待其他一组线程完成操作，再继续执行。</strong></font></p>
</blockquote>
<blockquote>
<p><font color='green'><strong>应用场景：汇总查询</strong></font></p>
</blockquote>
<blockquote>
<p><strong>CyclicBarrier</strong>（循环屏障）：<font color='green'><strong>让一组线程相互之间等待，达到一个共同点，再继续执行。某种需求中，旅游有很多旅游组，只有大家都到了，我们才能进行下一个目的地</strong></font></p>
</blockquote>
</blockquote>
<h3 id="Synchronized与AQS对比"><a href="#Synchronized与AQS对比" class="headerlink" title="Synchronized与AQS对比"></a>Synchronized与AQS对比</h3><p>Synchronized底层的同步队列为cxq和entryList， 等待队列为waitSet<br>AQS 同步队列为CLH， 条件队列为Condition</p>
<table>
<thead>
<tr>
<th>Synchronized</th>
<th>AQS</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>wait</td>
<td>await</td>
<td></td>
</tr>
<tr>
<td>notify</td>
<td>signal</td>
<td></td>
</tr>
<tr>
<td>nofifyAll</td>
<td>signalAll</td>
<td></td>
</tr>
</tbody></table>
<p>wait : 把当前线程放入waitSet，调用park<br>await: 把当前线程放入条件队列，调用park<br>notify: 从waitSet中哪一个线程等待对象出来放入entrySet或者cxq。<br>signal: 从条件队列的队头里把一个node节点放入CLH队列末尾。</p>
<h4 id="2、ReentrantLock原理"><a href="#2、ReentrantLock原理" class="headerlink" title="2、ReentrantLock原理"></a>2、ReentrantLock原理</h4><blockquote>
<p><font color='red'><u><em><strong>他是LOCK接口的一个实现，他有一个内部类Sync，这个类继承了AQS，所以我们也说重入锁依赖AQS，AQS使用一个整形的volatile变量（state）来维护同步状态。用CAS对state进行原子操作。state&#x3D;0表示初始状态可以占有锁，state&#x3D;1表示已有线程占有，大于1是重入锁。具体加锁的流程，就是sync调用lock，lock去调用acquire函数，acquire调用tryacquire，这里就分一下公平锁和非公平锁。</strong></em></u></font></p>
<p><strong>公平锁和非公平锁区别？</strong></p>
<p><font color='red'><u><em><strong>Sync有公平锁 和非公平锁，公平锁和非公平锁区别: 非公平锁在tryacquire的时候，里面有一个步骤是获取同步状态，如果这个同步状态是0的话，说明现在没人拿，我可以去直接去拿，公平锁这里会多一个判断hasQueuedPredecessors，会先看看自己是不是排队的第一个，如果不是的话，我就不抢占state了。如果state等于当前线程，说明当前线程已经持有锁的，触发可重入功能。如果没拿到就那就把这个线程和等待状态等信息狗造成一个节点加入同步队列，并且阻塞。</strong></em></u></font></p>
<p><font color='green'><u><em><strong>加入的时候怎么加入的？</strong></em></u></font></p>
<p><font color='blue'><u><em><strong>新的节点的Pre指向尾结点，然后用cas的方式让尾结点指向新节点，最后尾结点更新。</strong></em></u></font></p>
<h2 id="Condition"><a href="#Condition" class="headerlink" title="Condition"></a>Condition</h2><p><font color='green'><strong><code>Condition</code>提供了与<code>Object#wait</code>和<code>Object#notify</code>相同的功能，一般和lock搭配使用。他其实是一个条件队列。await的时候会释放锁，signal会回到AQS的同步队列。</strong></font></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/629921197">https://zhuanlan.zhihu.com/p/629921197</a></p>
</blockquote>
<h4 id="4、死锁"><a href="#4、死锁" class="headerlink" title="4、死锁"></a>4、死锁</h4><p>多个进程互相请求对方已经持有的资源。</p>
<blockquote>
<p>互斥条件：一个资源只能被一个线程拿</p>
<p>请求和保持：线程自己拿了不主动释放</p>
<p>不可剥夺：资源拿了不被动释放</p>
<p>循环等待：你等我，我等你</p>
</blockquote>
<p><font color='red'><u><em><strong>怎么破坏死锁：</strong></em></u></font></p>
<blockquote>
<p>总体：破坏四个条件</p>
<p>破坏互斥：用读锁</p>
<p>破坏请求和保持：让某个直接拿到所有的资源</p>
<p>不可剥夺：强制剥夺</p>
<p>破坏循环等待：确定好所有线程的顺序</p>
</blockquote>
<p>死锁的检测：</p>
<ul>
<li>可以依赖JPS和JSTACK。用jps拿到java进程的id，然后jstack分析堆栈信息。</li>
<li>也可以用可视化工具virtualVM</li>
</ul>
<h3 id="4、原子操作的实现原理"><a href="#4、原子操作的实现原理" class="headerlink" title="4、原子操作的实现原理"></a>4、原子操作的实现原理</h3><h4 id="1、处理器如何实现原子操作？"><a href="#1、处理器如何实现原子操作？" class="headerlink" title="1、处理器如何实现原子操作？"></a>1、处理器如何实现原子操作？</h4><p>总线锁：使用LOCK 信号，其他请求都被阻塞，独占共享内存</p>
<p>缓存锁：所谓缓存锁定是指内存被缓存在处理器的缓存中，当他执行锁操作写回内存的时候，而是修改内部的内存地址，并允许他缓存一致性保证操作原子性。</p>
<h4 id="2、Java怎么实现原子操作"><a href="#2、Java怎么实现原子操作" class="headerlink" title="2、Java怎么实现原子操作"></a>2、Java怎么实现原子操作</h4><p>锁–JVM实现锁的方式其实都用到了循环CAS</p>
<p>循环CAS –版本号解决ABA</p>
<h1 id="2、JAVA内存模型"><a href="#2、JAVA内存模型" class="headerlink" title="2、JAVA内存模型"></a>2、JAVA内存模型</h1><h2 id="1、定义理解"><a href="#1、定义理解" class="headerlink" title="1、定义理解"></a>1、定义理解</h2><p>为了提高性能，计算机会加入高级缓存、然后允许各种重排序，这种优化会破坏内存可见性问题、有序性问题，所以，<code>Java</code> 语言在遵循内存模型的基础上推出了 <code>JMM</code> 规范。比如说：<font color='red'><u><em><strong>把内存分成主内存和线程私有内存，定义了线程和主内存之间的抽象关系，还有线程之间如何通信和线程之间的同步问题</strong></em></u></font>:<font color='red'><u><em><strong>。所以要想理解JMM，可能还需要去了解重排序、as if serial、顺序一致性、happens-before</strong></em></u></font>。</p>
<h2 id="2、重排序"><a href="#2、重排序" class="headerlink" title="2、重排序"></a>2、重排序</h2><blockquote>
<p>重排序可以分成三类</p>
<ul>
<li><strong>1、编译器重排序：</strong> 例如将循环内重复调用的操作提前到循环外执行；</li>
<li><strong>2、处理器系统重排序：</strong> 例如指令并行技术将多条指令重叠执行，或者使用分支预测技术提前执行分支的指令，并把计算结果放到重排列缓冲区（Reorder Buffer）的硬件缓存中，当程序真的进入分支后直接使用缓存中的结算结果；</li>
<li><strong>3、存储器系统重排序：</strong> 例如写缓冲区和失效队列机制，即是可见性问题，从内存的角度也是指令重排问题。</li>
</ul>
<p>编译器方面有这么一个规定</p>
<p><font color='red'><u><em><strong>那重排序的原则是什么？</strong></em></u></font></p>
<blockquote>
<p>as-if-serial : 单线程 无论你怎么排，你结果不能给我变了。但是在多线程是会出问题的。</p>
</blockquote>
<p><font color='blue'><u><em><strong>如何解决重排序问题</strong></em></u></font></p>
<blockquote>
<p><font color='red'><u><em><strong>内存屏障</strong></em></u></font></p>
</blockquote>
</blockquote>
<h2 id="3、顺序一致性"><a href="#3、顺序一致性" class="headerlink" title="3、顺序一致性"></a>3、顺序一致性</h2><blockquote>
<p><font color='red'><u><em><strong>有个理想的模式叫做顺序一致性内存模型，一个线程中的操作完全是顺序的，所有线程只能看到一个单一的操作顺序。</strong></em></u></font></p>
<p><font color='red'><u><em><strong>如果程序的执行结果和顺序一致性模型相同，那么就叫做具备顺序一致性。</strong></em></u></font></p>
<p>JMM对于正确同步的 程序是保证顺序一致性的，虽然一个线程内部可能做了重排序，但是结果是不变的。</p>
<p>但是对于未同步的程序只提供最小安全保障：读到的值要么是之前写入的，要么是默认值。</p>
<p>如果你想要达到正确同步，那么就可以使用（synchronized、volatile、final）</p>
</blockquote>
<h2 id="4、happens-before-原则"><a href="#4、happens-before-原则" class="headerlink" title="4、happens-before 原则"></a>4、<font color='red'><u><em><strong>happens-before 原则</strong></em></u></font></h2><blockquote>
<p>他是高级的语言层面的一组规范。<font color='blue'><u><em><strong>as-if-serial语义保证单线程内程序的执行结果不被改变，happens-before关系保证正确同步的多线程程序的执行结果不被改变。如果一个操作happens-before另一个操作，那么第一个操作的执行结果将对第二个操作可见，而且第一个操作的执行顺序排在第二个操作之前。</strong></em></u></font></p>
<p>包括什么程序规则、锁规则、volatile规则、依赖规则</p>
<p>不过这里我们要强调的一点是：<strong>程序规则和指令重排并不冲突，如果我们要显示的禁止重排序，就需要显示的建立遵循happens-before的代码，比如synchronized、volatile、lock</strong>。所以我们说happensbefore是给程序员提供的</p>
</blockquote>
<h1 id="3、ThreadLocal"><a href="#3、ThreadLocal" class="headerlink" title="3、ThreadLocal"></a>3、ThreadLocal</h1><p><font color='red'><u><em><strong>threadlocal的使用场景</strong></em></u></font></p>
<blockquote>
<p>配置信息存储。mybatis分页插件pagehelper使用。cpu核数等等。</p>
<p>日志跟踪和调试。</p>
<p>全局用户信息</p>
<p>数据库连接，每个线程维护自己的数据库连接</p>
</blockquote>
<p><font color='red'><u><em><strong>threadlocal是一个用来解决多线程线程安全问题的方法，他给每个线程创建一个独立的线程副本解决共享变量的访问冲突的问题。</strong></em></u></font></p>
<p><font color='red'><u><strong>内存泄漏：</strong></u></font></p>
<p><font color='green'><strong>threadlocal会有两类引用，一个是外界的强引用，一个是entry key的弱引用。如果外界对他进行了回收【&#x3D; null】那强引用就没了，下次gc的时候就会被回收，会被gc清理掉,而 value 不会被清理掉，因为thread到threadlocalmap到entry到value这个链路是和线程同样的生命周期，线程不回收，引用一直存在，发生内存泄漏。</strong></font></p>
<p>threadlocal需要理解这张图片，线程里面有一个ThreadLocalMap，map的每一个Entry的key是threadlocal的弱引用，value是指向一个值的强引用。然后ThreadLocal的set方法，是先获取当前线程的ThreadLocalMap，然后调用ThreadLocalMap的set方法。</p>
<p><img src="/../images/Java%E5%B9%B6%E5%8F%91/image-20231027153110006.png" alt="image-20231027153110006"></p>
<p><font color='red'><u><em><strong>怎么解决</strong></em></u></font></p>
<p><font color='green'><strong>用完threadlocal后，手动remove一下。</strong></font></p>
<p><font color='red'><u><strong>弱引用是原罪吗？</strong></u></font></p>
<blockquote>
<p>不是，如果在某种情况下，栈帧跳出后，对threadlocal没有引用了，变量名立即回收了，按理来说threadlocal也要回收，是强引用的话，还有一个key的强引用，key是在entry里面，entry在map里面，map又是属于线程的，所以等同于和Thread生命周期绑定了。只有线程结束的时候才可以释放，如果线程生命周期比较短的话，那线程销毁的时候value也会收回。如果线程周期比较长的话，那么内存泄露的问题就会比较严重。其实设计者也考虑到到key被收到时导致内存泄漏问题，在调用ThreadLocal中set、remove、rehash时会扫描key为null的entry，并将value置为null，避免内存泄漏	</p>
</blockquote>
<blockquote>
<p><font color='green'><strong>强引用(Strongly Reference)</strong></font><br>指代码中普遍存在的赋值行为，如：Object o &#x3D; new Object()，只要强引用关系还在，对象就永远不会被回收。<br><font color='green'><strong>软引用(Soft Reference)</strong></font><br>还有用处，但是非必须存活的对象，JVM会在内存溢出前对其进行回收，例如：<font color='red'><u><em><strong>缓存</strong></em></u></font>。<br><font color='green'><strong>弱引用(Weak Reference)</strong></font><br>非必须存活的对象，引用关系比软引用还弱，不管内存是否够用，下次GC一定回收。<br><font color='green'><strong>虚引用(Phantom Reference)</strong></font><br>也称“幽灵引用”、，最弱的引用关系，完全不影响对象的回收，等同于没有引用，虚引用的唯一的目的是对象被回收时会收到一个系统通知。</p>
</blockquote>
<hr>
<h1 id="4、线程池和线程"><a href="#4、线程池和线程" class="headerlink" title="4、线程池和线程"></a>4、线程池和线程</h1><p><font color='red'><u><em><strong>JUC线程池参数，时间和时间单位哪里用，拒绝策略如果是主线程处理的话，我给你2个核心线程，5个最大线程，等待队列10，拒绝策略主线程执行，此时来了20个请求处理，会发生什么</strong></em></u></font></p>
<p><strong>线程安全的方案</strong></p>
<blockquote>
<p>1、锁</p>
<p>2、cas</p>
<p>3、threadlocal</p>
<p>4、读写分离</p>
</blockquote>
<p><font color='red'><u><em><strong>线程池就是管理线程的资源池。当有任务要处理时，直接从线程池中获取线程来处理，处理完之后线程并不会立即被销毁，而是等待下一个任务。</strong></em></u></font></p>
<p><font color='red'><u><em><strong>处理流程：</strong></em></u></font></p>
<p>1）先看核心线程池，有没有都在执行任务。如果不是都在执行，就创建一个工作线程执行任务，否则就看工作列表。</p>
<p>2）线程池判断工作列表有没有满，如果没有满，就把新提交的任务存到这个工作队列里面，</p>
<p>3）如果满了判断线程池里面的线程是否都在工作状态，如果没有就创建一个新的救济线程执行，如果满了，就交给饱和策略。</p>
<p><font color='red'><u><em><strong>核心线程没有生存时间，救济线程是有生存时间（KeepAliveTime 生存时间、unit时间单位）</strong></em></u></font></p>
<p><font color='red'><u><em><strong>怎么确认系统的最佳线程数</strong></em></u></font></p>
<blockquote>
<p><font color='red'><u><em><strong>1、先用用公式估计：</strong></em></u></font></p>
<p><font color='green'><strong>IO密集型，就设置成2*cpu核数+ 1</strong></font></p>
<p><font color='green'><strong>cpu密集型任务，就避免线程上下文切换，可以设置成cpu+1</strong></font></p>
<p><font color='red'><u><em><strong>2、其次压测一下：</strong></em></u></font></p>
<p><font color='green'><strong>最佳线程数 &#x3D; CPU 核心数 ∗（1+WT（线程等待时间）&#x2F;ST（线程计算时间）*目标cpu利用率</strong></font></p>
<p><font color='red'><strong>3、最后在上线进行调整</strong></font></p>
</blockquote>
<p><font color='red'><u><strong>如何设定线程池的大小？</strong></u></font></p>
<blockquote>
<p>最佳线程数 &#x3D; CPU 核心数 ∗（1+WT（线程等待时间）&#x2F;ST（线程计算时间）</p>
<p>反正和cpu核数和线程等待时间计算时间有关。</p>
</blockquote>
<p><font color='red'><u><em><strong>线程池的使用场景</strong></em></u></font></p>
<blockquote>
<p><font color='blue'><u><em><strong>数据分批导入导出</strong></em></u></font></p>
<p><font color='blue'><u><em><strong>分批查询汇总</strong></em></u></font></p>
</blockquote>
<p><font color='red'><u><em><strong>怎么限制接口可以访问的线程数？限流？</strong></em></u></font></p>
<blockquote>
<p><font color='blue'><u><em><strong>令牌桶，那个信号量可以实现这个</strong></em></u></font></p>
</blockquote>
<p><font color='red'><u><em><strong>线程池创建线程</strong></em></u></font>有两种方式：</p>
<blockquote>
<p><strong>方式一：通过<code>ThreadPoolExecutor</code>构造方法来创建（推荐）。xx</strong></p>
<p><strong>方式二： <code>Executors的工厂方法：比如Executors.newCachedThreadPool()</code>（不推荐）。</strong></p>
<p>两种方法都在concurrent包下面。</p>
<p>为什么不推荐？我觉得就是Executors提供的创建的几个线程池都有点局限性，都有不足的地方。</p>
<p>然后像Fixed和Single用的<font color='red'><u><em><strong>工作队列最大时Integer.MAX_VALUE</strong></em></u></font>，可能会堆积大量的请求,导致OOM</p>
<p>还有<font color='red'><u><em><strong>cached和Schedule最大的线程数量是Integer.MAX_VALUE</strong></em></u></font>，可能堆积大量的线程，导致OOM</p>
<p><font color='red'><u><em><strong>线程池的类型</strong></em></u></font></p>
<blockquote>
<p>FixedThreadPool，没有救济的线程，只有核心线程。阻塞队列是LinkedBlockingQueue，默认大小是Integer的MaxValue</p>
</blockquote>
<blockquote>
<p>SingleThreadExecutor，核心线程和最大线程就1个。阻塞队列是LinkedBlockingQueue，默认大小是Integer的MaxValue</p>
</blockquote>
<blockquote>
<p>CachedThreadPool：这个是没有核心线程数，全都是救济线程。阻塞队列是SynchronousQueue</p>
</blockquote>
<blockquote>
<p>ScheduledThreadPool：这个是定时执行任务，阻塞队列是DelayedWorkQueue</p>
</blockquote>
<p><font color='red'><u><em><strong>核心参数</strong></em></u></font></p>
<blockquote>
<p>corePoolSize</p>
<p>maximumPoolSize</p>
<p>keepAliveTime：多余线程的存活时间</p>
<p>unit</p>
<p>workQueue</p>
<p>handler 拒绝策略<font color='red'><u><em><strong>（可以自定义，继承RejectedExecutionHandler）</strong></em></u></font></p>
<p>threadFactory 线程工厂</p>
</blockquote>
</blockquote>
<h1 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h1><p><font color='red'><u><em><strong>怎么创建线程</strong></em></u></font></p>
<blockquote>
<p><font color='green'><strong>1、继承Thread、2、实现runnbale接口，3、实现callable接口，4、还有线程池（也是项目中的创建方法）</strong></font></p>
</blockquote>
<p><font color='red'><u><strong>runnable和callable有什么区别？</strong></u></font></p>
<table>
<thead>
<tr>
<th></th>
<th>callable</th>
<th>runnable</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td>有返回值的配合futuretask获得线程执行结果</td>
<td>无返回值</td>
</tr>
<tr>
<td></td>
<td>callable方法抛出异常</td>
<td>runnable不抛异常</td>
</tr>
<tr>
<td>实现方法</td>
<td>call</td>
<td>Run</td>
</tr>
</tbody></table>
<p><font color='blue'><u><em><strong>怎么退出线程？</strong></em></u></font></p>
<blockquote>
<p><font color='red'><u><em><strong>1、Interrupt，一种温和的方式，会把线程的中断状态位设置为true，告诉他他自己应该在合适的时间中断</strong></em></u></font></p>
<table>
<thead>
<tr>
<th>isInterrupted</th>
<th>检查线程的中断标记位，</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>interrupted</td>
<td>返回当前线程的中断标记位，同时清除中断标记，改为false</td>
<td></td>
</tr>
</tbody></table>
<p><font color='red'><u><em><strong>如果调用interrupt的时候正处于阻塞的状态，那就抛出一个异常，提前终止阻塞。</strong></em></u></font></p>
<p><font color='red'><u><em><strong>如果正常进行，那就是简单的把中断状态改成true，后面如果遇到wait、sleep就抛异常，不进行阻塞</strong></em></u></font></p>
<p><font color='red'><u><em><strong>2、退出标记，while循环</strong></em></u></font></p>
<p><font color='red'><u><em><strong>3、stop</strong></em></u></font></p>
</blockquote>
<p><font color='red'><u><em><strong>怎么减少线程上下文切换</strong></em></u></font></p>
<blockquote>
<p><font color='blue'><u><em><strong>上下文切换：保存当前线程的线程信息，加载下一个线程的线程信息。</strong></em></u></font></p>
<p><font color='blue'><u><em><strong>减少的方法：无锁编程和cas</strong></em></u></font></p>
</blockquote>
<p><font color='blue'><u><em><strong>线程有哪些状态，怎么转换</strong></em></u></font></p>
<p>new runnable blocked waiting timewaiting terminated</p>
<p><img src="/../images/JUC/image-20240113135657239.png" alt="image-20240113135657239"></p>
<p><strong>wait和sleep有什么不同</strong></p>
<blockquote>
<p><font color='red'><u><em><strong>都会让出cpu</strong></em></u></font></p>
<p><font color='green'><strong>sleep是线程类的方法。wait是object的方法。</strong></font></p>
<p><font color='green'><strong>sleep可以任何地方用，wait只能在同步方法或同步块里面用</strong></font>（<font color='blue'><u><em><strong>为什么？就是因为wait要释放锁，同步方法和同步块可以保证它获取到了锁</strong></em></u></font>）</p>
<p><font color='green'><strong>sleep是不释放锁。wait会释放锁</strong></font></p>
<p><font color='green'><strong>sleep到了时间会继续执行，wait会进入等待队列，</strong></font></p>
</blockquote>
<p><strong>启动的时候可以run方法吗</strong></p>
<blockquote>
<p>调用run，就是调用普通方法。不会启动线程</p>
</blockquote>
<p><strong>如何设计一个能够根据任务的优先级来执行的线程池？</strong></p>
<blockquote>
<p>队伍队列用一个优先级的队列</p>
</blockquote>
<p><strong>怎么给线程命名：</strong></p>
<blockquote>
<p>1、自己实现 <code>ThreadFactory</code>。</p>
</blockquote>
<h3 id="Future"><a href="#Future" class="headerlink" title="Future"></a><strong>Future</strong></h3><p>主线程处理一些耗时的任务的时候，可以把这个交给子线程，然后子线程解决后返回结果给主线程。</p>
<p>future就是一个用于处理异步任务的接口，futuretask实现了runnable和future，他有三个状态，未启动、启动、完成。如果在未启动和启动的时候执行get方法，就会阻塞调用get方法的线程。</p>
<p>颜屹钧：钧的话，本来想取一个君子的君，代表那种不轻言放弃、凛然正义的君子，但是君是属于水，就换成了钧，钧的话，本身就有尊贵的意思，然后还可以通“均”，这个均就有均衡的意思，各个方面都不差。</p>
<p>颜屹琛：琛，属金，本身是宝玉的意思，和小宝、66的瑾和瑜是一类意思，而且取得人少。</p>
<p>颜屹正。正属于金，反过来还刚好是正义。希望孩子刚正不阿，笔画也少点，寓意肯定是极好的。</p>
<p>颜屹心：取自“钧是人也,或从其大体,或从其小体,何也”–《孟子》。这句话的意思是：孟子说，同样是人，有的人注重身体重要部分，有的人注重身体次要部分。这是因为眼睛、耳朵等器官不会思考，容易被外物所蒙蔽，而心这个器官则有思考的能力，一思考就会有所得，不思考就得不到。所以，如果首先把心这个身体的重要部分树立起来，其他次要部分就不会被引入迷途，这样便可以成为君子。刚刚好，嫂子说过希望孩子有想法，前面那个屹也能对上树立，也蛮适合。不过这个“心”有一个问题，有人说属于金，有人说属于火。	</p>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮件至 caosen0819@163.com </span>
    </div>
</article>







    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©2017 CSEN
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    

    
</style>







</html>
