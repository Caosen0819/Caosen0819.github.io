
<!DOCTYPE html>
<html lang="zh-CH">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="森">
    <title>设计模式 - 森</title>
    <meta name="author" content="CSEN">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"CSEN","sameAs":["https://github.com/Caosen0819"],"image":"head.jpg"},"articleBody":"设计模式策略模式就是：“准备一组算法，并将每一个算法封装起来，使得它们可以互换。翻译一下就是，运行时我给你这个类的方法传不同的“key”，你这个方法会执行不同的业务逻辑。细品一下，这不就是 if else 干的事吗？\n但是原始的策略模式，他如果遇到参数是可变的，那他依旧会尽力if else的阶段，那就意义不大。所以我们的\n优化方法就是枚举类+map（原先的环境类变成map），然后通过这个参数，去map里面找就可以了，在我的项目里面也是这样的，\n抽奖的时候根据抽奖算法的id是1还是2，直接去map里面get就可以；生成订单id的时候用雪花还是美团哪一种方法，直接去map里面找\n模版模式模版模式的主要思路就是把自己要实现的功能抽象成一组步骤，也就是在抽象类中定义算法的骨架，具体实现留给子类。但是这里有一点非常重要，就是模版类的流程是定义好的，或者说定死了，子类就是在每一个步骤中实现自己的个性化。\n工厂模式工厂模式有三种，简单工厂、工厂模式、抽象工厂模式。\n简单工厂只适合单一产品的生产，他的思路很简单，就是根据不同信息new出来不同的对象。比如车 \n工厂模式是把原来的工厂作为抽象模型创建不同的子类工厂生产不同的商品。\n抽象工厂模式就考虑了多等级产品的生产，将同一个具体工厂所生产的位于不同等级（种类）的一组产品称为一个产品族。而抽象工厂模式就是对产品种类做了抽象。说得简单点就是在抽象工厂里面增加生产其他产品的接口，子类去实现它\n抽象工厂是需要理解产品族和产品等级两个概念。\n组合模式组合模式一般用来描述整体与部分的关系 ，它将对象组织到树形结构中 ，最顶层的节点称为根节点 ，根节点下面可以包含树枝节点和叶子节点 ，树枝节点下面又可以包含树枝节点和叶子节点。宗旨是通过将单个对象（叶子节点）和组合对象（树枝节点）用相同的接口进行表示 ，使得客户对单个对象和组合对象的使用具有一致性\n代理模式代理分成静态代理和动态代理，静态代理需要自己实现对每一个方法对代理，非常繁琐。动态代理更加灵活，不需要你一个一个的对方法进行代理。\n动态代理是代理类在程序运行时创建的代理方式被成为动态代理。\n动态代理有两种方式一种是jdk方法，一种是cglib方法\n我们先来讲jdk代理：\n在java的java.lang.reflect包下提供了一个Proxy类和一个InvocationHandler接口，通过这个类和这个接口可以生成JDK动态代理类和动态代理对象。\nInvocationHandler接口，他只有一个invoke方法，三个参数是代理类，被代理方法，方法参数组\n而这三个参数其实是可以变化的，被代理方法参数组是可以变化的，这三个参数里面代理方法和参数组其实我们可以依赖于最基础反射得到。那这样就成功的实现了动态的含义。\n那我们怎么去调用这个方法呢？依赖于Proxy类和他的方法newproxyInstance，getProxyClass0(loader, intfs)这个类的产生就是整个动态代理的关键，产生的类反编译之后得到，调用代理对象的方法其实会直接调用我们InvocationHandler接口的invoke方法，在invoke方法中调用了被代理对象的相应方法。\n下面来讲CGLIB代理\n在 CGLIB 动态代理机制中 MethodInterceptor 接口和 Enhancer 类是核心。你可以通过 Enhancer类来动态获取被代理类，\n  CGLIB 通过动态生成一个需要被代理类的子类（即被代理类作为父类），该子类重写被代理类的所有不是 final 修饰的方法，每次调用代理类的方法都会被方法拦截器拦截，在拦截器中才是调用目标类的该方法的逻辑。所以我们说，当代理类调用方法的时候，实际调用的是 MethodInterceptor 中的 intercept 方法。\n为什么JDK动态代理只能代理接口实现类，原因是JDK动态代理是基于接口实现的。\n有两个原因，一个是继承Proxy。第二个是当你使用Proxy类创建代理对象时，你需要指定一个接口列表来表示理对象的类型。代理对象的类型是由接口列表决定的，因此只有实现了接口的类才能被代理。如果你想代理一个类而不是一个接口，你需要使用其他的代理技术，比如CGLIB。\n二者区别总结一下两者的区别吧：\nJDK 动态代理基于接口，CGLIB 动态代理基于类。因为 JDK 动态代理生成的代理类需要继承 java.lang.reflect.Proxy，所以，只能基于接口；CGLIB 动态代理是根据类创建此类的子类，所以，此类不能被 final 修饰JDK 和 CGLIB 动态代理都是在运行期生成字节码。而 JDK 是直接写 Class 字节码；而 CGLIB 使用 ASM 框架写 Class 字节码（不鼓励直接使用ASM，因为它要求你必须对 JVM 内部结构包括 class 文件的格式和指令集都很熟悉）JDK 通过反射调用方法，CGLIB 通过 FastClass 机制（下一篇再将）直接调用方法。所以，CGLIB 执行的效率较高JDK 核心是实现 InvocationHandler接口，使用 invoke()方法进行面向切面的处理，调用相应的通知；CGLIB 动态代理是利用 asm 开源包，对代理对象类的 class 文件加载进来，通过修改其字节码生成子类来处理。核心是实现 MethodInterceptor 接口，使用 intercept() 方法进行面向切面的处理，调用相应的通知。\n策略模式\n讲一讲策略模式以及在项目的应用？\n\n一个问题基于对象的某个特征的不同而有不同的解决方案，传统的方法就是ifif，策略模式就是为了解决这种问题。\n策略模式具体的实验需要三个部分，一个是策略接口这个很简单，一个是环境类，包含策略接口，他的作用就是把具体的算法和用户分开；一个是具体的策略类（ 接口回调（向上转型）。比如初级中级高级会员打折力度不一样，\n但是，策略模式有一个问题就是，如果我传进来的策略是一个参数，是一个可变的值，那么这个策略模式还是需要经历if else，所以我的优化方法就是枚举类+map（原先的环境类变成map），然后通过这个参数，去map里面找就可以了，在我的项目里面也是这样的，\n抽奖的时候根据抽奖算法的id是1还是2，直接去map里面get就可以；生成订单id的时候用雪花还是美团哪一种方法，直接去map里面找\n模版模式\n讲一讲模版模式以及在项目的应用？\n\n模版模式的主要思路就是把自己要实现的功能抽象成一组步骤，也就是在抽象类中定义算法的骨架，具体实现留给子类。但是这里有一点非常重要，就是模版类的流程是定义好的，或者说定死了，子类就是在每一个步骤中实现自己的个性化。\n在我的项目中，我对抽奖流程用了模版模式\n// 1. 获取抽奖策略// 2. 校验抽奖策略是否已经初始化到内存// 3. 获取不在抽奖范围内的列表，包括：奖品库存为空、风控策略、临时调整等// 4. 执行抽奖算法// 5. 包装中奖结果\n\n工厂模式\n讲一讲简单工厂模式以及在项目中的应用？\n\n简单工厂模式包含三块，工厂：负责实现创建实例的内部逻辑；抽象产品：负责描述所有实例共有的接口；具体产品：被创建的对象，简单工厂只适合单一产品的生产。其实思路很简单，就是把根据不同信息new出不同对象的这一个过程抽象出来了，不然每次都要走一遍这种代码就比较繁琐。\n我的项目里面就是对于发放奖品的时候选用哪一个奖品用到了简单工厂。\n组合模式\n讲一讲组合模式以及在项目中的应用\n\n组合模式一般用来描述整体与部分的关系 ，它将对象组织到树形结构中 ，最顶层的节点称为根节点 ，根节点下面可以包含树枝节点和叶子节点 ，树枝节点下面又可以包含树枝节点和叶子节点。宗旨是通过将单个对象（叶子节点）和组合对象（树枝节点）用相同的接口进行表示 ，使得客户对单个对象和组合对象的使用具有一致性\n装饰器模式装饰器模式的核心就是不改原有类的基础上给类新增功能。其实说白了就是在原本类的基础上包装一个装饰器类，这个类在执行源类的行为的前后再加入一些新的逻辑。\n抽象组件public abstract class Component &#123;    public abstract void execute();&#125;具体组件（需要被装饰的组件）public class ConcreteComponent extends Component &#123;    @Override    public void execute() &#123;        System.out.println(&quot;具体组件处理业务逻辑&quot;);    &#125;&#125;抽象装饰器（继承、实现抽象组件，并持有抽象组件）public abstract class Decorator extends Component &#123;     * 抽象组件    public Component component;    public Decorator(Component component) &#123;        this.component = component;    &#125;    public void execute() &#123;        component.execute();    &#125;&#125;具体装饰器A继承抽象装饰器public class ConcreteDecorator extends Decorator &#123;    public ConcreteDecorator(Component component) &#123;        super(component);    &#125;    public void before()&#123;        System.out.println(&quot;ConcreteDecorator前置操作....&quot;);    &#125;    public void after()&#123;        System.out.println(&quot;ConcreteDecorator后置操作....&quot;);    &#125;组件本身执行的动作    public void execute() &#123;        before();        component.execute();        after();    &#125;&#125;decorator 通用写法测试public class Test &#123;    public static void main(String[] args) &#123;        //创建需要被装饰的组件        Component component = new ConcreteComponent();        //给对象透明的增加功能并调用        Decorator decorator = new ConcreteDecorator(component);        decorator.execute();    &#125;&#125;\n\n\n\n\n\n\n\n适配器模式\n目标角色（Target）：该角色定义把其他类转换为何种接口。\n源角色（Adaptee）：被适配的对象\n适配器角色（Adapter）：该对象将源对象转换成目标接口\n\n总结一下就是：我们在适配器里面实现目标角色的接口，然后在这个接口里面去调用源角色的方法。\n如果这个源角色类需继承，那我们就叫类适配器。如果直接作为适配器的一个变量，那么就叫做对象适配器。\n分为两类：类适配器和 对象适配器\n/** * 翻译 * @param source 母语 * @param target 要翻译成的语种 * @param words 内容 */’  public interface Target &#123;\t\tvoid translate(String source,String target,String words);/** * @author Created by njy on 2023/6/8 * 源对象(source）：充当翻译 */public class Translator &#123;     //英——》汉    public void translateInZh(String words)&#123;        if(&quot;hello world！&quot;.equals(words))&#123;            System.out.println(&quot;翻译成中文：”你好世界！“&quot;);        &#125;    &#125;     //汉——》英    public void translateInEn(String words)&#123;        if(&quot;你好世界！&quot;.equals(words))&#123;            System.out.println(&quot;Translate in English：”hello world！“&quot;);        &#125;    &#125;/** * @author Created by njy on 2023/6/11 * 类适配器：通过多重继承目标接口和被适配者类方式来实现适配 */public class ClassAdapter extends Translator implements Target &#123;     @Override    public void translate(String source, String target, String words) &#123;        if(&quot;中文&quot;.equals(source) &amp;&amp; &quot;英文&quot;.equals(target)) &#123;            //汉--》英            this.translateInEn(words);        &#125; else &#123;            //英--》汉            this.translateInZh(words);        &#125;    &#125;&#125;\n\n\n/** * @author Created by njy on 2023/6/11 * 对象适配器：使用组合的方式 */public class ObjectAdapter implements Target &#123;     private Translator translator=new Translator();     @Override    public void translate(String source, String target, String words) &#123;        if(&quot;中文&quot;.equals(source) &amp;&amp; &quot;英文&quot;.equals(target)) &#123;            //汉--》英            translator.translateInEn(words);        &#125; else &#123;            //英--》汉            translator.translateInZh(words);        &#125;    &#125;&#125;\n\n\n\n桥接模式桥接模式通过将继承改为组合的方式来解决这个问题。具体来说，就是抽取其中一个维度并使之成为独立的类层次，这样就可以在初始类中引用这个新层次的对象，从而使得一个类不必拥有所有的状态和行为。\t\n支付接口 public interface IPay &#123;     void pay(); &#125;wx支付 public class WXPay implements IPay &#123;     @Override     public void pay() &#123;         System.out.println(&quot;wx支付&quot;);     &#125; &#125;zfb支付 public class ZFBPay implements IPay &#123;     @Override     public void pay() &#123;         System.out.println(&quot;支付宝支付&quot;);     &#125; &#125;解锁抽象类   public abstract class PayType &#123;     protected IPay iPay;     public PayType(IPay iPay) &#123;         this.iPay = iPay;     &#125;     public abstract void pay(); &#125;人脸解锁 public class FacePay extends PayType &#123;      public FacePay(IPay iPay) &#123;         super(iPay);     &#125;      @Override     public void pay() &#123;         iPay.pay();         System.out.println(&quot;人脸识别&quot;);     &#125; &#125;指纹解锁 public class FingerPay extends PayType &#123;      public FingerPay(IPay iPay) &#123;         super(iPay);     &#125;      @Override     public void pay() &#123;         iPay.pay();         System.out.println(&quot;指纹识别&quot;);     &#125; &#125;\n\n外观模式外观模式可以理解为转换一群接口，客户只要调用这一个接口而不用调用多个接口才能达到目的，也不需关心这个子系统的内部细节。就是解决多个复杂接口带来的使用困难，起到简化用户操作的作用。\n享元模式\n其本质就是缓存共享对象，降低内存消耗。\n\n**享元模式其实就是工厂模式的一个改进机制，享元模式同样要求创建一个或一组对象，并且就是通过**工厂方法**生成对象的，不同的地方在于享元模式增加了*缓存*的功能\n/** * @author Created by njy on 2023/6/21 * 1.抽象享元类（FlyWeight）：单车 * 单车有很多共同的信息比如：价格、颜色 */public abstract class Bike &#123;     protected String color;     protected int price;     public Bike(String color,int price)&#123;        this.color=color;        this.price=price;    &#125;     //展示单车信息    public abstract void show(); &#125;/** * @author Created by njy on 2023/6/21 * 2.具体享元类（ConcreteFlyWeight）：摩拜单车 */public class Mobike extends Bike&#123;     public Mobike(String color,int price)&#123;        super(color,price);    &#125;     @Override    public void show() &#123;        System.out.println(&quot;生产成功：摩拜单车——&quot;+color+&quot;,&quot;+&quot;起步价&quot;+price+&quot;元&quot;);    &#125;&#125;/** * @author Created by njy on 2023/6/21 * 2.具体享元类（ConcreteFlyWeight）：美团单车 */public class MTBike extends Bike&#123;     public MTBike(String color,int price)&#123;        super(color,price);    &#125;     @Override    public void show() &#123;        System.out.println(&quot;生产成功：小黄车——&quot;+color+&quot;,&quot;+&quot;起步价&quot;+price+&quot;元&quot;);    &#125;&#125;/** * @author Created by njy on 2023/6/21 * 3.享元工厂类（FlyWeightFactory）：单车工厂 */public class BikeFactory &#123;    //map缓存    public static Map&lt;String,Bike&gt; bikeMap=new HashMap&lt;&gt;();    public static Bike getBike(String color,String type)&#123;        String key=color+&quot;_&quot;+type;        if(bikeMap.containsKey(key))&#123;            //如果已经有该颜色和类型的单车，直接返回            return bikeMap.get(key);        &#125;else &#123;            Bike bike=null;            //没有，创建并放入缓存            if(&quot;mobike&quot;.equals(type))&#123;                bike=new Mobike(color,1);            &#125;else if (&quot;MT&quot;.equals(type))&#123;                bike=new MTBike(color,2);            &#125;else &#123;                System.out.println(&quot;抛异常！没有该类型的单车&quot;);            &#125;            //放入缓存            bikeMap.put(key,bike);            return bike;        &#125;    &#125;&#125;\n\n","dateCreated":"2023-10-10T00:00:00+08:00","dateModified":"2023-10-22T21:22:20+08:00","datePublished":"2023-10-10T00:00:00+08:00","description":"","headline":"设计模式","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com/2023/10/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},"publisher":{"@type":"Organization","name":"CSEN","sameAs":["https://github.com/Caosen0819"],"image":"head.jpg","logo":{"@type":"ImageObject","url":"head.jpg"}},"url":"http://example.com/2023/10/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","keywords":"设计模式"}</script>
    <meta name="description" content="设计模式策略模式就是：“准备一组算法，并将每一个算法封装起来，使得它们可以互换。翻译一下就是，运行时我给你这个类的方法传不同的“key”，你这个方法会执行不同的业务逻辑。细品一下，这不就是 if else 干的事吗？ 但是原始的策略模式，他如果遇到参数是可变的，那他依旧会尽力if else的阶段，那就意义不大。所以我们的 优化方法就是枚举类+map（原先的环境类变成map），然后通过这个参数，去m">
<meta property="og:type" content="blog">
<meta property="og:title" content="设计模式">
<meta property="og:url" content="http://example.com/2023/10/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index.html">
<meta property="og:site_name" content="森">
<meta property="og:description" content="设计模式策略模式就是：“准备一组算法，并将每一个算法封装起来，使得它们可以互换。翻译一下就是，运行时我给你这个类的方法传不同的“key”，你这个方法会执行不同的业务逻辑。细品一下，这不就是 if else 干的事吗？ 但是原始的策略模式，他如果遇到参数是可变的，那他依旧会尽力if else的阶段，那就意义不大。所以我们的 优化方法就是枚举类+map（原先的环境类变成map），然后通过这个参数，去m">
<meta property="og:locale" content="zh_CH">
<meta property="article:published_time" content="2023-10-09T16:00:00.000Z">
<meta property="article:modified_time" content="2023-10-22T13:22:20.832Z">
<meta property="article:author" content="CSEN">
<meta property="article:tag" content="设计模式">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="http://example.com/assets/images/head.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-w816scvuzwavitjylabixcb3ofuoklqul47j3rgwu1r0mxrxvbdehvp2jk5s.min.css">

    <!--STYLES END-->
    

    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            森
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/head.jpg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/head.jpg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">CSEN</h4>
                
                    <h5 class="sidebar-profile-bio"><p>author.bio</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="首页"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="分类"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分类</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="标签"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="档案"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">档案</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="搜索"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">搜索</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="关于"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">关于</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/Caosen0819"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title=".github"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">.github</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            设计模式
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2023-10-10T00:00:00+08:00">
	
		    Oct 10, 2023
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Java/">Java</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <h1 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h1><h2 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h2><p>就是：“准备一组算法，并将每一个算法封装起来，使得它们可以互换。<strong>翻译一下就是</strong>，运行时我给你这个类的方法传不同的“key”，你这个方法会执行不同的业务逻辑。<strong>细品一下，这不就是 if else 干的事吗？</strong></p>
<p>但是原始的策略模式，他如果遇到参数是可变的，那他依旧会尽力if else的阶段，那就意义不大。所以我们的</p>
<p>优化方法就是枚举类+map（原先的环境类变成map），然后通过这个参数，去map里面找就可以了，在我的项目里面也是这样的，</p>
<p>抽奖的时候根据抽奖算法的id是1还是2，直接去map里面get就可以；生成订单id的时候用雪花还是美团哪一种方法，直接去map里面找</p>
<h2 id="模版模式"><a href="#模版模式" class="headerlink" title="模版模式"></a>模版模式</h2><p>模版模式的主要思路就是把自己要实现的功能抽象成一组<strong>步骤</strong>，也就是在抽象类中定义算法的骨架，具体实现留给子类。但是这里有一点非常重要，就是模版类的流程是定义好的，或者说定死了，子类就是在每一个步骤中实现自己的个性化。</p>
<h2 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h2><p>工厂模式有三种，简单工厂、工厂模式、抽象工厂模式。</p>
<p>简单工厂只适合单一产品的生产，他的思路很简单，就是根据不同信息new出来不同的对象。比如车 </p>
<p>工厂模式是把原来的工厂作为抽象模型创建不同的子类工厂生产不同的商品。</p>
<p><strong>抽象工厂模式</strong>就考虑了多等级产品的生产，将同一个具体工厂所生产的<strong>位于不同等级（种类）的一组产品称为一个产品族</strong>。而抽象工厂模式就是对产品种类做了抽象。说得简单点就是在抽象工厂里面增加生产其他产品的接口，子类去实现它</p>
<p>抽象工厂是需要理解产品族和产品等级两个概念。</p>
<h2 id="组合模式"><a href="#组合模式" class="headerlink" title="组合模式"></a>组合模式</h2><p>组合模式一般用来描述整体与部分的关系 ，它将对象组织到树形结构中 ，最顶层的节点称为根节点 ，根节点下面可以包含树枝节点和叶子节点 ，树枝节点下面又可以包含树枝节点和叶子节点。宗旨是通过将单个对象（叶子节点）和组合对象（树枝节点）用相同的接口进行表示 ，使得客户对单个对象和组合对象的使用具有一致性</p>
<h2 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h2><p>代理分成静态代理和动态代理，静态代理需要自己实现对每一个方法对代理，非常繁琐。动态代理更加灵活，不需要你一个一个的对方法进行代理。</p>
<p><strong>动态代理</strong>是代理类在程序运行时创建的代理方式被成为动态代理。</p>
<p>动态代理有两种方式一种是jdk方法，一种是cglib方法</p>
<p><strong>我们先来讲jdk代理：</strong></p>
<p>在java的<strong>java.lang.reflect包下提供了一个Proxy类和一个InvocationHandler接口</strong>，<strong>通过这个类和这个接口可以生成JDK动态代理类和动态代理对象</strong>。</p>
<p>InvocationHandler接口，他只有一个invoke方法，三个参数是代理类，被代理方法，方法参数组</p>
<p>而这三个参数其实是可以变化的，被代理方法参数组是可以变化的，这三个参数里面代理方法和参数组其实我们可以依赖于最基础反射得到。那这样就成功的实现了动态的含义。</p>
<p>那我们怎么去调用这个方法呢？依赖于Proxy类和他的方法newproxyInstance，getProxyClass0(loader, intfs)这个类的产生就是整个动态代理的关键，产生的类反编译之后得到，调用代理对象的方法其实会直接调用我们InvocationHandler接口的invoke方法，在invoke方法中调用了被代理对象的相应方法。</p>
<p><strong>下面来讲CGLIB代理</strong></p>
<p><strong>在 CGLIB 动态代理机制中 <code>MethodInterceptor</code> 接口和 <code>Enhancer</code> 类是核心。你可以通过 <code>Enhancer</code>类来动态获取被代理类，</strong></p>
<p>  CGLIB 通过动态生成一个需要被代理类的子类（即被代理类作为父类），该子类重写被代理类的所有不是 final 修饰的方法，每次调用代理类的方法都会被方法<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E6%8B%A6%E6%88%AA%E5%99%A8&spm=1001.2101.3001.7020">拦截器</a>拦截，在拦截器中才是调用目标类的该方法的逻辑。所以我们说，当代理类调用方法的时候，实际调用的是 <code>MethodInterceptor</code> 中的 <code>intercept</code> 方法。</p>
<p>为什么JDK动态代理只能代理接口实现类，原因是JDK动态代理是基于接口实现的。</p>
<p>有两个原因，一个是继承Proxy。第二个是当你使用Proxy类创建代理对象时，你需要指定一个接口列表来表示理对象的类型。代理对象的类型是由接口列表决定的，因此只有实现了接口的类才能被代理。如果你想代理一个类而不是一个接口，你需要使用其他的代理技术，比如CGLIB。</p>
<p><strong>二者区别</strong><br>总结一下两者的区别吧：</p>
<p>JDK 动态代理基于接口，CGLIB 动态代理基于类。因为 JDK 动态代理生成的代理类需要继承 java.lang.reflect.Proxy，所以，只能基于接口；CGLIB 动态代理是根据类创建此类的子类，所以，此类不能被 final 修饰<br>JDK 和 CGLIB 动态代理都是在运行期生成字节码。而 JDK 是直接写 Class 字节码；而 CGLIB 使用 ASM 框架写 Class 字节码（不鼓励直接使用ASM，因为它要求你必须对 JVM 内部结构包括 class 文件的格式和指令集都很熟悉）<br>JDK 通过反射调用方法，CGLIB 通过 FastClass 机制（下一篇再将）直接调用方法。所以，CGLIB 执行的效率较高<br>JDK 核心是实现 InvocationHandler接口，使用 invoke()方法进行面向切面的处理，调用相应的通知；CGLIB 动态代理是利用 asm 开源包，对代理对象类的 class 文件加载进来，通过修改其字节码生成子类来处理。核心是实现 MethodInterceptor 接口，使用 intercept() 方法进行面向切面的处理，调用相应的通知。</p>
<h2 id="策略模式-1"><a href="#策略模式-1" class="headerlink" title="策略模式"></a>策略模式</h2><ul>
<li><h2 id="讲一讲策略模式以及在项目的应用？"><a href="#讲一讲策略模式以及在项目的应用？" class="headerlink" title="讲一讲策略模式以及在项目的应用？"></a><strong>讲一讲策略模式以及在项目的应用？</strong></h2></li>
</ul>
<p>一个问题基于对象的某个特征的不同而有不同的解决方案，传统的方法就是ifif，策略模式就是为了解决这种问题。</p>
<p>策略模式具体的实验需要三个部分，一个是策略接口这个很简单，一个是环境类，包含策略接口，他的作用就是把具体的算法和用户分开；一个是具体的策略类（ <em>接口回调（向上转型</em>）。比如初级中级高级会员打折力度不一样，</p>
<p>但是，策略模式有一个问题就是，如果我传进来的策略是一个参数，是一个可变的值，那么这个策略模式还是需要经历if else，所以我的优化方法就是枚举类+map（原先的环境类变成map），然后通过这个参数，去map里面找就可以了，在我的项目里面也是这样的，</p>
<p>抽奖的时候根据抽奖算法的id是1还是2，直接去map里面get就可以；生成订单id的时候用雪花还是美团哪一种方法，直接去map里面找</p>
<h2 id="模版模式-1"><a href="#模版模式-1" class="headerlink" title="模版模式"></a>模版模式</h2><ul>
<li><h2 id="讲一讲模版模式以及在项目的应用？"><a href="#讲一讲模版模式以及在项目的应用？" class="headerlink" title="讲一讲模版模式以及在项目的应用？"></a><strong>讲一讲模版模式以及在项目的应用？</strong></h2></li>
</ul>
<p>模版模式的主要思路就是把自己要实现的功能抽象成一组<strong>步骤</strong>，也就是在抽象类中定义算法的骨架，具体实现留给子类。但是这里有一点非常重要，就是模版类的流程是定义好的，或者说定死了，子类就是在每一个步骤中实现自己的个性化。</p>
<p>在我的项目中，我对抽奖流程用了模版模式</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 获取抽奖策略</span></span><br><span class="line"><span class="comment">// 2. 校验抽奖策略是否已经初始化到内存</span></span><br><span class="line"><span class="comment">// 3. 获取不在抽奖范围内的列表，包括：奖品库存为空、风控策略、临时调整等</span></span><br><span class="line"><span class="comment">// 4. 执行抽奖算法</span></span><br><span class="line"><span class="comment">// 5. 包装中奖结果</span></span><br></pre></td></tr></table></figure>

<h2 id="工厂模式-1"><a href="#工厂模式-1" class="headerlink" title="工厂模式"></a>工厂模式</h2><ul>
<li><h2 id="讲一讲简单工厂模式以及在项目中的应用？"><a href="#讲一讲简单工厂模式以及在项目中的应用？" class="headerlink" title="讲一讲简单工厂模式以及在项目中的应用？"></a><strong>讲一讲简单工厂模式以及在项目中的应用？</strong></h2></li>
</ul>
<p>简单工厂模式包含三块，工厂：负责实现创建实例的内部逻辑；抽象产品：负责描述所有实例共有的接口；具体产品：被创建的对象，简单工厂只适合单一产品的生产。其实思路很简单，就是把根据不同信息new出不同对象的这一个过程抽象出来了，不然每次都要走一遍这种代码就比较繁琐。</p>
<p>我的项目里面就是对于发放奖品的时候选用哪一个奖品用到了简单工厂。</p>
<h2 id="组合模式-1"><a href="#组合模式-1" class="headerlink" title="组合模式"></a>组合模式</h2><ul>
<li><h2 id="讲一讲组合模式以及在项目中的应用"><a href="#讲一讲组合模式以及在项目中的应用" class="headerlink" title="讲一讲组合模式以及在项目中的应用"></a><strong>讲一讲组合模式以及在项目中的应用</strong></h2></li>
</ul>
<p>组合模式一般用来描述整体与部分的关系 ，它将对象组织到树形结构中 ，最顶层的节点称为根节点 ，根节点下面可以包含树枝节点和叶子节点 ，树枝节点下面又可以包含树枝节点和叶子节点。宗旨是通过将单个对象（叶子节点）和组合对象（树枝节点）用相同的接口进行表示 ，使得客户对单个对象和组合对象的使用具有一致性</p>
<h2 id="装饰器模式"><a href="#装饰器模式" class="headerlink" title="装饰器模式"></a>装饰器模式</h2><p>装饰器模式的核心就是不改原有类的基础上给类新增功能。其实说白了就是在原本类的基础上包装一个装饰器类，这个类在执行源类的行为的前后再加入一些新的逻辑。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">抽象组件</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Component</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">execute</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line">具体组件（需要被装饰的组件）</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConcreteComponent</span> <span class="keyword">extends</span> <span class="title class_">Component</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">execute</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;具体组件处理业务逻辑&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">抽象装饰器（继承、实现抽象组件，并持有抽象组件）</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Decorator</span> <span class="keyword">extends</span> <span class="title class_">Component</span> &#123;</span><br><span class="line"></span><br><span class="line">     * 抽象组件</span><br><span class="line">    <span class="keyword">public</span> Component component;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Decorator</span><span class="params">(Component component)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.component = component;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">execute</span><span class="params">()</span> &#123;</span><br><span class="line">        component.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">具体装饰器A继承抽象装饰器</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConcreteDecorator</span> <span class="keyword">extends</span> <span class="title class_">Decorator</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ConcreteDecorator</span><span class="params">(Component component)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(component);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ConcreteDecorator前置操作....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ConcreteDecorator后置操作....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">组件本身执行的动作</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">execute</span><span class="params">()</span> &#123;</span><br><span class="line">        before();</span><br><span class="line">        component.execute();</span><br><span class="line">        after();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">decorator 通用写法测试</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建需要被装饰的组件</span></span><br><span class="line">        <span class="type">Component</span> <span class="variable">component</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConcreteComponent</span>();</span><br><span class="line">        <span class="comment">//给对象透明的增加功能并调用</span></span><br><span class="line">        <span class="type">Decorator</span> <span class="variable">decorator</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConcreteDecorator</span>(component);</span><br><span class="line">        decorator.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<h2 id="适配器模式"><a href="#适配器模式" class="headerlink" title="适配器模式"></a>适配器模式</h2><ul>
<li>目标角色（Target）：该角色定义把其他类转换为何种接口。</li>
<li>源角色（Adaptee）：被适配的对象</li>
<li>适配器角色（Adapter）：该对象将源对象转换成目标接口</li>
</ul>
<p>总结一下就是：我们在适配器里面实现目标角色的接口，然后在这个接口里面去调用源角色的方法。</p>
<p>如果这个源角色类需继承，那我们就叫类适配器。如果直接作为适配器的一个变量，那么就叫做对象适配器。</p>
<p>分为两类：类适配器和 对象适配器</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 翻译</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> source 母语</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> target 要翻译成的语种</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> words 内容</span></span><br><span class="line"><span class="comment"> */</span>’</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Target</span> &#123;</span><br><span class="line">		<span class="keyword">void</span> <span class="title function_">translate</span><span class="params">(String source,String target,String words)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Created by njy on 2023/6/8</span></span><br><span class="line"><span class="comment"> * 源对象(source）：充当翻译</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Translator</span> &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//英——》汉</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">translateInZh</span><span class="params">(String words)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;hello world！&quot;</span>.equals(words))&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;翻译成中文：”你好世界！“&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//汉——》英</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">translateInEn</span><span class="params">(String words)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;你好世界！&quot;</span>.equals(words))&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Translate in English：”hello world！“&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Created by njy on 2023/6/11</span></span><br><span class="line"><span class="comment"> * 类适配器：通过多重继承目标接口和被适配者类方式来实现适配</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassAdapter</span> <span class="keyword">extends</span> <span class="title class_">Translator</span> <span class="keyword">implements</span> <span class="title class_">Target</span> &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">translate</span><span class="params">(String source, String target, String words)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;中文&quot;</span>.equals(source) &amp;&amp; <span class="string">&quot;英文&quot;</span>.equals(target)) &#123;</span><br><span class="line">            <span class="comment">//汉--》英</span></span><br><span class="line">            <span class="built_in">this</span>.translateInEn(words);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//英--》汉</span></span><br><span class="line">            <span class="built_in">this</span>.translateInZh(words);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Created by njy on 2023/6/11</span></span><br><span class="line"><span class="comment"> * 对象适配器：使用组合的方式</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ObjectAdapter</span> <span class="keyword">implements</span> <span class="title class_">Target</span> &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> Translator translator=<span class="keyword">new</span> <span class="title class_">Translator</span>();</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">translate</span><span class="params">(String source, String target, String words)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;中文&quot;</span>.equals(source) &amp;&amp; <span class="string">&quot;英文&quot;</span>.equals(target)) &#123;</span><br><span class="line">            <span class="comment">//汉--》英</span></span><br><span class="line">            translator.translateInEn(words);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//英--》汉</span></span><br><span class="line">            translator.translateInZh(words);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="桥接模式"><a href="#桥接模式" class="headerlink" title="桥接模式"></a>桥接模式</h2><p><strong>桥接模式通过将继承改为组合的方式来解决这个问题</strong>。具体来说，就是抽取其中一个维度并使之成为独立的类层次，这样就可以在初始类中引用这个新层次的对象，从而使得一个类不必拥有所有的状态和行为。	</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">支付接口 </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IPay</span> &#123;</span><br><span class="line">     <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">()</span>;</span><br><span class="line"> &#125;</span><br><span class="line">wx支付</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WXPay</span> <span class="keyword">implements</span> <span class="title class_">IPay</span> &#123;</span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">()</span> &#123;</span><br><span class="line">         System.out.println(<span class="string">&quot;wx支付&quot;</span>);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line">zfb支付</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ZFBPay</span> <span class="keyword">implements</span> <span class="title class_">IPay</span> &#123;</span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">()</span> &#123;</span><br><span class="line">         System.out.println(<span class="string">&quot;支付宝支付&quot;</span>);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line">解锁抽象类</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">PayType</span> &#123;</span><br><span class="line">     <span class="keyword">protected</span> IPay iPay;</span><br><span class="line">     <span class="keyword">public</span> <span class="title function_">PayType</span><span class="params">(IPay iPay)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.iPay = iPay;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">()</span>;</span><br><span class="line"> &#125;</span><br><span class="line">人脸解锁</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FacePay</span> <span class="keyword">extends</span> <span class="title class_">PayType</span> &#123;</span><br><span class="line"> </span><br><span class="line">     <span class="keyword">public</span> <span class="title function_">FacePay</span><span class="params">(IPay iPay)</span> &#123;</span><br><span class="line">         <span class="built_in">super</span>(iPay);</span><br><span class="line">     &#125;</span><br><span class="line"> </span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">()</span> &#123;</span><br><span class="line">         iPay.pay();</span><br><span class="line">         System.out.println(<span class="string">&quot;人脸识别&quot;</span>);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line">指纹解锁</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FingerPay</span> <span class="keyword">extends</span> <span class="title class_">PayType</span> &#123;</span><br><span class="line"> </span><br><span class="line">     <span class="keyword">public</span> <span class="title function_">FingerPay</span><span class="params">(IPay iPay)</span> &#123;</span><br><span class="line">         <span class="built_in">super</span>(iPay);</span><br><span class="line">     &#125;</span><br><span class="line"> </span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">()</span> &#123;</span><br><span class="line">         iPay.pay();</span><br><span class="line">         System.out.println(<span class="string">&quot;指纹识别&quot;</span>);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h2 id="外观模式"><a href="#外观模式" class="headerlink" title="外观模式"></a>外观模式</h2><p>外观模式可以理解为转换一群接口，客户只要调用这一个接口而不用调用多个接口才能达到目的，也不需关心这个子系统的内部细节。就是解决多个复杂接口带来的使用困难，起到简化用户操作的作用。</p>
<h2 id="享元模式"><a href="#享元模式" class="headerlink" title="享元模式"></a>享元模式</h2><blockquote>
<p><strong>其本质就是缓存共享对象，降低内存消耗</strong>。</p>
</blockquote>
<p>**享元模式其实就是工厂模式的一个改进机制，享元模式同样要求创建一个或一组对象，并且就是通过**工厂方法**生成对象的，不同的地方在于享元模式增加了*<em>缓存*<em>的功能</em></em></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Created by njy on 2023/6/21</span></span><br><span class="line"><span class="comment"> * 1.抽象享元类（FlyWeight）：单车</span></span><br><span class="line"><span class="comment"> * 单车有很多共同的信息比如：价格、颜色</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Bike</span> &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">protected</span> String color;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> price;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Bike</span><span class="params">(String color,<span class="type">int</span> price)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.color=color;</span><br><span class="line">        <span class="built_in">this</span>.price=price;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//展示单车信息</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span>;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Created by njy on 2023/6/21</span></span><br><span class="line"><span class="comment"> * 2.具体享元类（ConcreteFlyWeight）：摩拜单车</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Mobike</span> <span class="keyword">extends</span> <span class="title class_">Bike</span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Mobike</span><span class="params">(String color,<span class="type">int</span> price)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(color,price);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;生产成功：摩拜单车——&quot;</span>+color+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;起步价&quot;</span>+price+<span class="string">&quot;元&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Created by njy on 2023/6/21</span></span><br><span class="line"><span class="comment"> * 2.具体享元类（ConcreteFlyWeight）：美团单车</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MTBike</span> <span class="keyword">extends</span> <span class="title class_">Bike</span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MTBike</span><span class="params">(String color,<span class="type">int</span> price)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(color,price);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;生产成功：小黄车——&quot;</span>+color+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;起步价&quot;</span>+price+<span class="string">&quot;元&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Created by njy on 2023/6/21</span></span><br><span class="line"><span class="comment"> * 3.享元工厂类（FlyWeightFactory）：单车工厂</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BikeFactory</span> &#123;</span><br><span class="line">    <span class="comment">//map缓存</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String,Bike&gt; bikeMap=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Bike <span class="title function_">getBike</span><span class="params">(String color,String type)</span>&#123;</span><br><span class="line">        String key=color+<span class="string">&quot;_&quot;</span>+type;</span><br><span class="line">        <span class="keyword">if</span>(bikeMap.containsKey(key))&#123;</span><br><span class="line">            <span class="comment">//如果已经有该颜色和类型的单车，直接返回</span></span><br><span class="line">            <span class="keyword">return</span> bikeMap.get(key);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            Bike bike=<span class="literal">null</span>;</span><br><span class="line">            <span class="comment">//没有，创建并放入缓存</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;mobike&quot;</span>.equals(type))&#123;</span><br><span class="line">                bike=<span class="keyword">new</span> <span class="title class_">Mobike</span>(color,<span class="number">1</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;MT&quot;</span>.equals(type))&#123;</span><br><span class="line">                bike=<span class="keyword">new</span> <span class="title class_">MTBike</span>(color,<span class="number">2</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;抛异常！没有该类型的单车&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//放入缓存</span></span><br><span class="line">            bikeMap.put(key,bike);</span><br><span class="line">            <span class="keyword">return</span> bike;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2023/10/28/MySQL45%E8%AE%B2/"
                    data-tooltip="MYSQL45讲"
                    aria-label="PREVIOUS: MYSQL45讲"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2023/10/09/Redis/"
                    data-tooltip="Redis复习"
                    aria-label="NEXT: Redis复习"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://example.com/2023/10/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=http://example.com/2023/10/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=http://example.com/2023/10/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2023 CSEN. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2023/10/28/MySQL45%E8%AE%B2/"
                    data-tooltip="MYSQL45讲"
                    aria-label="PREVIOUS: MYSQL45讲"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2023/10/09/Redis/"
                    data-tooltip="Redis复习"
                    aria-label="NEXT: Redis复习"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://example.com/2023/10/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=http://example.com/2023/10/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=http://example.com/2023/10/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=http://example.com/2023/10/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"
                        aria-label="Share on Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Share on Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=http://example.com/2023/10/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"
                        aria-label="Share on Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=http://example.com/2023/10/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"
                        aria-label="Share on Google+"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Share on Google+</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/head.jpg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">CSEN</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                浙江温州
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-39paoi2hupf5wmw7ojejrxpco6edftjriz5ezbtp4grymrdceksftgan2adp.min.js"></script>

<!--SCRIPTS END-->


    




    </body>
</html>
